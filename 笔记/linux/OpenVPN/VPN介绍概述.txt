â–  1.VPNä»‹ç»

â—¼ 1.1VPN æ¦‚è¿°
		VPN(å…¨ç§° Virtual Private Network)è™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼Œæ˜¯ä¾é ISPå’Œå…¶ä»–NSPï¼Œåœ¨å…¬å…±ç½‘ç»œä¸­å»ºç«‹ä¸“ç”¨çš„æ•°æ®é€šä¿¡ç½‘ç»œçš„æŠ€æœ¯ï¼Œ
	å¯ä»¥ä¸ºä¼ä¸šä¹‹é—´æˆ–è€…ä¸ªäººä¸ä¼ä¸šä¹‹é—´æä¾›å®‰å…¨çš„æ•°æ®ä¼ è¾“éš§é“æœåŠ¡ã€‚åœ¨VPNä¸­ä»»æ„ä¸¤ç‚¹ä¹‹é—´çš„é“¾æ¥å¹¶æ²¡æœ‰ä¼ ç»Ÿä¸“ç½‘æ‰€éœ€çš„ç«¯åˆ°ç«¯
	çš„ç‰©ç†é“¾è·¯ï¼Œè€Œæ˜¯åˆ©ç”¨å…¬å…±ç½‘ç»œèµ„æºåŠ¨æ€ç»„æˆçš„ï¼Œå¯ä»¥ç†è§£ä¸ºé€šè¿‡ç§æœ‰çš„éš§é“æŠ€æœ¯åœ¨å…¬å…±æ•°æ®ç½‘ç»œä¸Šæ¨¡æ‹Ÿå‡ºæ¥çš„å’Œä¸“ç½‘æœ‰åŒæ ·åŠŸ
	èƒ½çš„ç‚¹åˆ°ç‚¹çš„ä¸“çº¿æŠ€æœ¯ï¼Œæ‰€è°“è™šæ‹Ÿæ˜¯æŒ‡ä¸éœ€è¦å»æ‹‰å®é™…çš„é•¿é€”ç‰©ç†çº¿è·¯ï¼Œè€Œæ˜¯å€Ÿç”¨äº†å…¬å…±Internetç½‘ç»œå®ç°
	
	ä¸ºäº†ä¾¿äºå¤§å®¶ç†è§£ï¼Œç»™ä¸€ä¸ªç›´è§‚çš„å½¢è±¡å›¾ï¼š
			
			ç‰›éƒ==================ç»‡å¥³
						é¹Šæ¡¥
						
		æç¤ºï¼šæˆ‘ä»¬æ›¾ç»éƒ½ç”¨è¿‡ä»€ä¹ˆç±»ä¼¼VPNçš„éš§é“ä¹ˆï¼Ÿ è§£ç­”ï¼šSsh,LVS TUN(ipip),Pptp,ipsec

â–ª 1.1.2 VPN çš„ä½œç”¨			
		 VPNåŠŸèƒ½å¯ä»¥å¸®åŠ©å…¬å¸é‡Œè¿œç¨‹ç”¨æˆ·ï¼ˆå‡ºå·®ï¼Œå®¶é‡Œï¼‰ã€å…¬å¸çš„åˆ†ææœºæ„ã€å•†ä¸šåˆä½œä¼™ä¼´åŠåº”ç”¨å•†ç­‰å…¬å¸å’Œè‡ªå·±çš„å…¬å¸å†…éƒ¨ç½‘ç»œä¹‹
	é—´å»ºç«‹å¯ä¿¡çš„å®‰å…¨é“¾æ¥æˆ–è€…æ˜¯å±€åŸŸç½‘é“¾æ¥ï¼Œç¡®ä¿æ•°æ®çš„åŠ å¯†å®‰å…¨ä¼ è¾“å’Œä¸šåŠ¡è®¿é—®ï¼Œå¯¹äºè¿ç»´å·¥ç¨‹å¸ˆæ¥è¯´ï¼Œè¿˜å¯ä»¥é“¾æ¥ä¸åŒçš„æœºæˆ¿ä¸º
	å±€åŸŸç½‘ï¼Œå¤„ç†ç›¸å…³çš„ä¸šåŠ¡æµï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€å¼ ç½‘ç»œé€»è¾‘å›¾ä¸ºå¤§å®¶æè¿°VPNçš„ä½œç”¨ã€‚
	
		
â–ª 1.1.3 VPN çš„åˆ†ç±»
		1ã€è¿œç¨‹è®¿é—®VPNæœåŠ¡
		 å³é€šè¿‡ä¸ªäººç”µè„‘è¿œç¨‹æ‹¨å·åˆ°ä¼ä¸šåŠå…¬å®¤ç½‘ç»œã€‚
		 a.ä¸€èˆ¬ä¸ºä¼ä¸šå†…éƒ¨å‘˜å·¥å‡ºå·®ã€ä¼‘å‡æˆ–ç‰¹æ®Šæƒ…å†µä¸‹åœ¨è¿œç¦»åŠå…¬å®¤çš„æ—¶å€™ï¼Œåˆæœ‰éœ€æ±‚è®¿é—®å…¬å¸çš„å†…éƒ¨ç½‘ç»œè·å–ç›¸å…³èµ„æºï¼Œå°±å¯ä»¥é€š
	è¿‡VPNæ‹¨å·åˆ°å…¬å¸å†…éƒ¨ã€‚æ­¤æ—¶è¿œç¨‹æ‹¨å·çš„å‘˜å·¥å’ŒåŠå…¬å®¤å†…çš„å‘˜å·¥ä»¥åŠå…¶ä»–æ‹¨å·çš„å‘˜å·¥ä¹‹é—´éƒ½ç›¸å½“äºä¸€ä¸ªå±€åŸŸç½‘ç»œå†…ã€‚ä¾‹å¦‚ï¼šè®¿é—®å†…éƒ¨
	çš„åŸŸæ§åˆ¶å™¨ï¼Œæ–‡ä»¶æœåŠ¡å™¨ï¼ŒOAç³»ç»Ÿï¼ŒERPï¼ŒHTTPæœåŠ¡ï¼Œå†…ç½‘é£ç§‹èŠå¤©å·¥å…·ç­‰å±€åŸŸç½‘æœåŠ¡åº”ç”¨ã€‚
		 b.å¯¹äºè¿ç»´äººå‘˜å°±æ˜¯éœ€è¦ä¸ªäººç”µè„‘è¿œç¨‹æ‹¨å·åˆ°ä¼ä¸šç½‘ç«™IDCæœºæˆ¿ï¼Œè¿œç¨‹ç»´æŠ¤IDCå†…ç½‘æœåŠ¡å™¨ã€‚ï¼ˆä¸€èˆ¬æ— å¤–ç½‘IPï¼Œæ•°æ®åº“ï¼Œå­˜å‚¨ï¼‰
	æ­¤ç‚¹æ˜¯æŠ€æœ¯äººå‘˜ç‰¹åˆ«æ˜¯è¿ç»´äººå‘˜åœ¨å·¥ä½œä¸­ä¼šç»å¸¸ç”¨è¿™ä¸ªæ–¹æ³•ç»´æŠ¤å¤§é‡çš„æœºæˆ¿å†…æ— å¤–ç½‘IPçš„æœåŠ¡å™¨åŠç½‘ç»œè®¾å¤‡ã€‚
	è®²è§£å°±ä¸šç­æ¶æ„å›¾ï¼šç‰¤ç‰›é˜µæ³•
		2ã€ä¼ä¸šå†…éƒ¨ç½‘ç»œä¹‹é—´VPNæœåŠ¡
		åœ¨å…¬å¸åˆ†æ”¯æœºæ„çš„å±€åŸŸç½‘å’Œå…¬å¸æ€»éƒ¨LANä¹‹é—´VPNé“¾æ¥ã€‚é€šè¿‡å…¬ç½‘Internetå»ºç«‹VPNå°†å…¬å¸åœ¨å„åœ°çš„åˆ†æ”¯æœºæ„çš„LANè¿æ¥åˆ°å…¬å¸æ€»éƒ¨
	çš„LANã€‚ä¾‹å¦‚ï¼šå„å¤§è¶…å¸‚ä¹‹é—´ä¸šåŠ¡ç»“ç®—ç­‰ã€‚
		è¿™æ˜¯ç”±äºåœ°åŸŸçš„åŸå› è€Œäº§ç”Ÿçš„VPNçš„éœ€æ±‚ï¼Œé€šè¿‡VPNè®©æ­¥åŒåœ°åŸŸçš„æœºå™¨å¯ä»¥äº’ç›¸è®¿é—®ï¼Œå°±å¥½åƒæ˜¯ä¸€ä¸ªå±€åŸŸç½‘ä¸€æ ·ã€‚ä¾‹å¦‚ï¼šåŠå…¬å®¤äº’
	è”ååŒåŠå…¬ï¼Œæœºæˆ¿äº’è”æ•°æ®åŒæ­¥åŠä¸šåŠ¡è®¿é—®ç­‰ã€‚
		3ã€äº’è”ç½‘å…¬å¸å¤šIDCæœºæˆ¿ä¹‹é—´VPNæœåŠ¡
		æ­¤å¤„æ˜¯è¿ç»´æ¶æ„äººå‘˜éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚æ­¥åŒæœºæˆ¿ä¹‹é—´ä¸šåŠ¡ç®¡ç†å’Œä¸šåŠ¡è®¿é—®ï¼Œæ•°æ®æµåŠ¨
		4ã€ä¼ä¸šå¤–éƒ¨VPNæœåŠ¡
		åœ¨ä¾›åº”å•†ã€åˆä½œä¼™ä¼´çš„LANå’Œæœ¬å…¬å¸çš„LANä¹‹é—´å»ºç«‹çš„VPNæœåŠ¡
		5ã€è®¿é—®å›½å¤–çš„ç½‘ç«™
		ç¿»å¢™ä¸šåŠ¡åº”ç”¨
		 
â–ª 1.1.4 å¸¸è§çš„éš§é“åè®®ä»‹ç»
	
			1.1.4.1ç‚¹å¯¹ç‚¹éš§é“åè®®ï¼ˆPPTPï¼‰æ˜¯ç”±åŒ…æ‹¬å¾®è½¯å’Œ3Comç­‰å…¬å¸ç»„æˆçš„PPTPè®ºå›å¼€å‘çš„ä¸€ç§ç‚¹å¯¹ç‚¹éš§é“åè®®ï¼ŒåŸºäºæ‹¨å·ä½¿ç”¨çš„PPPåè®®ï¼Œä½¿
		ç”¨PAPæˆ–CHAPä¹‹ç±»çš„åŠ å¯†ç®—æ³•ï¼Œæˆ–è€…ä½¿ç”¨Microsoftçš„ç‚¹å¯¹ç‚¹åŠ å¯†ç®—æ³•MPPEã€‚å…¶é€šè¿‡è·¨è¶ŠåŸºäº  TCP/IP çš„æ•°æ®ç½‘ç»œåˆ›å»ºVPNå®ç°äº†ä»è¿œç¨‹å®¢æˆ·
		ç«¯åˆ°ä¸“ç”¨ä¼ä¸šæœåŠ¡å™¨ä¹‹é—´æ•°æ®çš„å®‰å…¨ä¼ è¾“ã€‚PPTPæ”¯æŒé€šè¿‡å…¬å…±ç½‘ç»œï¼ˆä¾‹å…¥Internetï¼‰å»ºç«‹æŒ‰éœ€çš„ã€å¤šåè®®çš„ã€è™šæ‹Ÿä¸“ç”¨ç½‘ç»œã€‚PPTPå…è®¸åŠ å¯†
		IPé€šè®¯ï¼Œç„¶ååœ¨è¦è·¨è¶Šå…¬å¸IPç½‘ç»œæˆ–å…¬å…±IPç½‘ç»œï¼ˆå¦‚Internetï¼‰å‘é€çš„IPå¤´ä¸­å¯¹å…¶è¿›è¡Œå°è£…ã€‚å…¸å‹çš„linuxå¹³å°çš„å¼€æºè½¯ä»¶ä¸ºpptpã€‚

â–ª 1.1.5 å®ç°VPNåŠŸèƒ½çš„å¸¸è§å¼€æºäº§å“		 
		â—¾ 4.1.5.1 PPTP VPN 
			ä½¿ç”¨PPTP VPN çš„æœ€å¤§ä¼˜åŠ¿åœ¨äºï¼Œæ— éœ€åœ¨windowså®¢æˆ·ç«¯å•ç‹¬å®‰è£…å®¢æˆ·ç«¯è½¯ä»¶ï¼Œwindowsé»˜è®¤å°±æ”¯æŒ PPTP VPN æ‹¨å·è¿æ¥åŠŸèƒ½ã€‚å¦å¤–ï¼Œ
		PPTP VPNå±äºç‚¹å¯¹ç‚¹æ–¹å¼çš„åº”ç”¨ï¼Œæ¯”è¾ƒé€‚åˆè¿œç¨‹çš„ä¼ä¸šç”¨æˆ·æ‹¨å·åˆ°ä¼ä¸šè¿›è¡ŒåŠå…¬ç­‰åº”ç”¨ã€‚å¾ˆå¤šå°åŒºåŠç½‘ç»œè®¾å¤‡ä¸æ”¯æŒPPTPå¯¼è‡´æ— æ³•è®¿é—®ã€‚
		å…¸å‹çš„linuxå¹³å°å¼€æºè½¯ä»¶ä¸ºpptp
		
		â—¾ 4.1.5.2 SSL VPN(OPENVPN)
			PPTPä¸»è¦ä¸ºé‚£äº›ç»å¸¸å¤–å‡ºç§»åŠ¨æˆ–å®¶åº­åŠå…¬çš„ç”¨æˆ·è€ƒè™‘ï¼Œè€ŒOpenVPN  ä¸å•ä½¿ç”¨äºPPTPçš„åº”ç”¨åœºæ™¯ï¼Œè¿˜é€‚åˆé’ˆå¯¹ä¼ä¸šå¼‚åœ°ä¸¤åœ°æ€»åˆ†å…¬
		å¸ä¹‹é—´çš„VPNä¸é—´æ–­æŒ‰éœ€è¿æ¥ï¼Œä¾‹å¦‚ï¼šERP,OA,åŠæ—¶é€šè®¯å·¥å…·ç­‰åœ¨ä¼ä¸šä¸­çš„åº”ç”¨ã€‚
		ç¼ºç‚¹ï¼šéœ€è¦å•ç‹¬å®‰è£…å®¢æˆ·ç«¯è½¯ä»¶
		
		
		â—¾ 4.1.5.3 IPSEC VPN 
			IPSEC VPN ä¹Ÿé€‚åˆé’ˆå¯¹ä¼ä¸šå¼‚åœ°ä¸¤åœ°æ€»åˆ†å…¬å¸æˆ–å¤šä¸ªIDCæœºæˆ¿ä¹‹é—´VPNä¸é—´æ–­æŒ‰éœ€è¿æ¥ï¼Œå¹¶ä¸”åœ¨éƒ¨ç½²ä½¿ç”¨å•†æ›´ç®€å•æ–¹ä¾¿ã€‚
			ipsec vpn çš„å¼€æºäº§å“ openswanã€‚
		 
â—¾ 1.1.6 æ ¹æ®ä¼ä¸šç”Ÿäº§åœºæ™¯éœ€æ±‚é€‰æ‹©vpnæ–¹æ¡ˆå»ºè®®
		1ã€å¦‚æœé¢†å¯¼æ„¿æ„èŠ±é’±ï¼Œå¯ä»¥é€‰æ‹©ç›¸å…³ç¡¬ä»¶äº§å“ï¼Œä¸é”™çš„æˆç†Ÿçš„å¾ˆå¤šï¼Œä¾‹å¦‚ï¼šé˜²ç«å¢™ã€è´Ÿè½½å‡è¡¡ç­‰ç¡¬ä»¶äº§å“éƒ½é™„å¸¦VPNåŠŸèƒ½ã€‚ï¼ˆè¿ç»´æ¶æ„å¸ˆçš„ä»·å€¼ï¼‰
		2ã€å¯¹äºå¤šæ•°äº’è”ç½‘å…¬å¸ï¼Œä¸ºäº†ä½“ç°æˆ‘ä»¬è¿ç»´æ¶æ„å¸ˆçš„ä»·å€¼ï¼Œæˆ‘ä»¬åº”è¯¥å»ºè®®è€æ¿é€‰æ‹©å¼€æºäº§å“ï¼Œä¼˜åŠ¿å°±æ˜¯ç”Ÿé’±ï¼Œå¯æ‰©å±•æ€§æ›´
		å¼ºï¼Œï¼ˆæ¯ä¸ªæœºæˆ¿å¯ä»¥æœ‰é«˜å¯ç”¨ï¼‰ä¾‹å¦‚ï¼šäºŒæ¬¡å¼€å‘ï¼Œç›¸åº”çš„æ”¹åŠ¨ã€‚
		3ã€å¯¹äºå¼€æºçš„äº§å“ï¼Œè€ç”·å­©è€å¸ˆå»ºè®®ï¼š
			a.ä¸ªäººæ‹¨å·é€‰æ‹©openvpnï¼ŒåŠŸèƒ½å¼ºå¤§ã€ç¨³å®šå¯é ã€‚
			b.å¦‚æœè€å¤§ä¸å¸Œæœ›å•ç‹¬å®‰è£…å®¢æˆ·ç«¯æ‹¨å·ï¼Œåˆ™å¯é€‰æ‹©PPTPï¼Œä½†æ˜¯å°½é‡æ‰“æ¶ˆè€å¤§ä½¿ç”¨PPTPçš„æƒ³æ³•ã€‚
			c.å¤šä¸ªä¼ä¸šä¹‹é—´æˆ–è€…å¤šä¸ªIDCæœºæˆ¿ç›´æ¥äº’è”ï¼Œé€‰æ‹©ipsec vpnï¼ˆopenswanï¼‰ æˆ– openvpnã€‚
		 
		4ã€è€ç”·å­©æ¶æ„å¸ˆåŸ¹è®­è®²è§£ï¼šopenvpnï¼Œipsec vpn çš„å®Œæ•´ä¼ä¸šå®ç°ã€‚å¯ä»¥æ»¡è¶³å„ç§ä¼ä¸šéœ€æ±‚ã€‚
		 
â—¼ 1.2 openvpnå¼€æºäº§å“		 
		 
â—¾ 1.2.1 openvpn äº§å“ä»‹ç»
			åœ¨ä¼—å¤švpnçš„äº§å“ä¸­ï¼ŒOpenVPNæ— ç–‘æ˜¯linuxä¸‹å¼€æºVPNçš„å…ˆé”‹ï¼Œå®ƒæä¾›äº†è‰¯å¥½çš„è®¿é—®æ€§èƒ½å’Œå‹å¥½çš„ç”¨æˆ·GUIã€‚
			OpenVPNæ˜¯ä¸€ä¸ªç”¨äºåˆ›å»ºè™šæ‹Ÿä¸“ç”¨ç½‘ç»œåŠ å¯†é€šé“çš„è½¯ä»¶åŒ…ï¼Œæœ€æ—©ç”±James Yonanç¼–å†™ã€‚OpenVPNå…è®¸å‚ä¸å»ºç«‹
		VPNçš„å•ç‚¹ä½¿ç”¨é¢„è®¾çš„ç§é’¥ï¼Œç¬¬ä¸‰æ–¹è¯ä¹¦ï¼Œæˆ–è€…ç”¨æˆ·å/å¯†ç æ¥è¿›è¡Œèº«ä»½éªŒè¯ã€‚å®ƒå¤§é‡ä½¿ç”¨äº†OpenSSLåŠ å¯†åº“ï¼Œä»¥
		åŠSSLv1åè®®ã€‚OpenVPNèƒ½åœ¨Linuxã€xBSDã€Mac OS X ä¸ Windows ä¸Šè¿è¡Œã€‚Openvpnæ˜¯ä¸€ä¸ªæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯è½¯ä»¶ï¼Œ
		è€Œä¸æ˜¯ä¸€ä¸ªåŸºäºWeb çš„VPNè½¯ä»¶ï¼Œä¹Ÿä¸ä¸IPsecåŠå…¶ä»–VPNè½¯ä»¶åŒ…å…¼å®¹ã€‚
			å®˜æ–¹ä»‹ç»ï¼Œè§è€ç”·å­©linuxåŸ¹è®­-openvpn how-to

â—¾ 1.2.2 openvpn ä¾èµ–çš„SSLä¸TLSåè®®ä»‹ç»
		SSL å³ï¼Œå®‰å…¨å¥—æ¥å±‚ï¼ˆSecure Sockets Layer,SSLï¼‰æ˜¯ä¸€ç§å®‰å…¨åè®®è¯ç”Ÿçš„ç›®çš„æ˜¯ä¸ºç½‘ç»œé€šä¿¡æä¾›å®‰å…¨åŠæ•°æ®å®Œæ•´æ€§ä¿éšœï¼ŒSSLåœ¨ä¼ è¾“
	å±‚ä¸­å¯¹ç½‘ç»œé€šä¿¡è¿›è¡ŒåŠ å¯†ã€‚
		SSLé‡‡ç”¨å…¬å¼€å¯†é’¥æŠ€æœ¯ï¼Œä¿è¯ä¸¤ä¸ªç”¨äºé—´é€šä¿¡çš„ä¿å¯†æ€§å’Œå¯é æ€§ï¼Œä½¿å®¢æˆ·ä¸æœåŠ¡å™¨åº”ç”¨ä¹‹é—´ä¿å¯†é€šè®¯çš„å·¥ä¸šæ ‡å‡†ã€‚ç°è¡Œçš„ Web æµè§ˆå™¨äº¦
	æ™®éå°† HTTP å’Œ SSL ç›¸ç»“åˆï¼Œä»è€Œå®ç°å®‰å…¨é€šä¿¡ã€‚SSL åè®®å…¶ç»§ä»»è€…æ˜¯TLSã€‚
		åæ¥IETFï¼ˆwww.ietf.orgï¼‰å°†SSLä½œäº†æ ‡å‡†åŒ–ï¼Œå³RFC2246ï¼Œå¹¶å°†å…¶ç§°ä¸ºTLS(Transport Layer Security)ï¼Œå…¶æœ€æ–°ç‰ˆæœ¬æ˜¯ RFC 5246ï¼Œç‰ˆ
	æœ¬1.2ã€‚ä»æŠ€æœ¯ä¸Šè®²ï¼ŒTLS1.0 ä¸ SSL3.0 çš„å·®å¼‚éå¸¸å¾®å°ã€‚
		TLS(Transport Layer Security)
		TLS åˆ©ç”¨å¯†é’¥ç®—æ³•åœ¨äº’è”ç½‘ä¸Šæä¾›ç«¯ç‚¹èº«ä»½è®¤è¯ä¸é€šè®¯ä¿å¯†ï¼Œå…¶åŸºç¡€æ˜¯å…¬é’¥åŸºç¡€è®¾æ–½(public key infrastructure, PKI)ã€‚ä¸è¿‡åœ¨å®ç°
	çš„å…¸å‹ä¾‹å­ä¸­ï¼Œåªæœ‰ç½‘ç»œæœåŠ¡è€…è¢«å¯é èº«ä»½éªŒè¯ï¼Œè€Œå…¶å®¢æˆ·ç«¯åˆ™ä¸ä¸€å®šã€‚è¿™æ˜¯å› ä¸ºå…¬é’¥åŸºç¡€è®¾æ–½æ™®éå•†ä¸šè¿è¥ï¼Œç”µå­ç­¾åè¯ä¹¦é€šå¸¸éœ€è¦ä»˜è´¹
	è´­ä¹°ã€‚åè®®çš„è®¾è®¡åœ¨æŸç§ç¨‹åº¦ä¸Šèƒ½å¤Ÿä½¿ä¸»ä»æ¶æ„åº”ç”¨ç¨‹åºé€šè®¯æœ¬èº«é¢„é˜²çªƒå¬ã€å¹²æ‰°ï¼ˆTamperingï¼‰å’Œæ¶ˆæ¯ä¼ªé€ ã€‚
		 
â—¾ 1.2.3 openvpn çš„åŠ å¯†é€šè®¯åŸç†è¿‡ç¨‹
		OpenVPNä½¿ç”¨ TLS åŠ å¯†æ˜¯é€šè¿‡ä½¿ç”¨å…¬å¼€å¯†é’¥ï¼ˆéå¯¹ç§°å¯†é’¥ï¼ŒåŠ å¯†è§£å¯†ä½¿ç”¨ä¸åŒçš„keyï¼Œä¸€ä¸ªç§°ä¸ºPublic keyï¼Œå¦ä¸€ä¸ªæ˜¯Private keyï¼‰å¯¹
	æ•°æ®è¿›è¡ŒåŠ å¯†çš„ï¼Œå¯¹äºTLSä¼ è¾“çš„å·¥ä½œåŸç†ï¼Œè¿™é‡Œæš‚ä¸”å…ˆä¸ä»‹ç»ã€‚å¯¹äºOpen VPNä½¿ç”¨TLS modeï¼Œé¦–å…ˆServerå’ŒClientè¦æœ‰ç›¸åŒCAç­¾å‘çš„è¯ä¹¦ï¼Œ
	åŒæ–¹é€šè¿‡äº¤æ¢è¯ä¹¦éªŒè¯åŒæ–¹çš„åˆæ³•æ€§ä»¥å†³å®šæ˜¯å¦å»ºç«‹VPNè¿æ¥ï¼Œç„¶åä½¿ç”¨å¯¹æ–¹CAæŠŠè‡ªå·±ç›®å‰ä½¿ç”¨çš„æ•°æ®åŠ å¯†æ–¹æ³•ï¼ˆç±»ä¼¼äºå¯†é’¥ï¼‰åŠ å¯†åå‘é€ç»™
	å¯¹æ–¹ï¼Œç”±äºä½¿ç”¨å¯¹æ–¹CAåŠ å¯†çš„ï¼Œæ‰€ä»¥åªæœ‰å¯¹æ–¹CAå¯¹åº”çš„ Private key æ‰èƒ½è§£å¯†è¯¥å­—ä¸²ï¼Œä¿è¯äº†æ­¤å¯†é’¥çš„å®‰å…¨æ€§ï¼Œå¹¶ä¸”æ­¤å¯†é’¥å®šæœŸæ”¹å˜ï¼Œå¯¹äº
	çªƒå¬è€…æ¥è¯´ï¼Œå¯èƒ½è¿˜æ²¡æœ‰ç ´è§£å‡ºå¯†é’¥ï¼Œé€šä¿¡åŒæ–¹ä»¥åŠæ›´æ¢å¯†é’¥äº†ã€‚
		 
â—¾ 1.2.4 openvpn çš„å¤šç§èº«ä»½éªŒè¯æ–¹å¼
		OpenVPN æä¾›äº†å¤šç§èº«ä»½éªŒè¯æ–¹å¼ï¼Œç”¨ä»¥ç¡®è®¤å‚ä¸è¿æ¥åŒæ–¹çš„èº«ä»½ï¼ŒåŒ…æ‹¬ï¼šé¢„äº«ç§é’¥ï¼Œç¬¬ä¸‰æ–¹è¯ä¹¦ä»¥åŠç”¨æˆ·å/å¯†ç ç»„åˆç­‰ã€‚é¢„äº«å¯†é’¥æœ€
	ä¸ºç®€å•ï¼Œä½†åŒæ—¶å®ƒåªèƒ½ç”¨äºå»ºç«‹ç‚¹å¯¹ç‚¹çš„VPNï¼šåŸºäºKPIçš„ç¬¬ä¸‰æ–¹è®¤è¯ä¹¦æä¾›äº†æœ€å®Œå–„çš„åŠŸèƒ½ï¼Œä½†æ˜¯éœ€è¦é¢å¤–çš„ç²¾åŠ›å»ç»´æŠ¤ä¸€ä¸ªPKIè¯ä¹¦ä½“ç³»ã€‚
	OpenVPN2.0åå¼•å…¥äº†ç”¨æˆ·å/å£ä»¤ç»„åˆçš„èº«ä»½éªŒè¯æ–¹å¼ï¼Œå®ƒå¯ä»¥çœç•¥å®¢æˆ·ç«¯é¢„äº«å¯†é’¥ï¼Œä½†æ˜¯ä»æœ‰ä¸€ä»½æœåŠ¡å™¨CAè¯ä¹¦éœ€è¦è¢«ç”¨ä½œåŠ å¯†ï¼Œæ¯”è¾ƒå¥½çš„
	éªŒè¯æ–¹å¼è¿˜æœ‰LDAPæˆ–åŸŸæ§åˆ¶å™¨ç»Ÿä¸€éªŒè¯ç­‰ã€‚æ›´å¤šéªŒè¯æ–¹å¼åæ–‡è®²è§£ã€‚

â—¾ 1.2.5 openvpn é€šä¿¡åŸç†
		OpenVPNæ‰€æœ‰çš„é€šä¿¡éƒ½åŸºäºä¸€ä¸ªå•ä¸€çš„IPç«¯å£ï¼ˆé»˜è®¤ä¸º1194ï¼‰ï¼Œé»˜è®¤ä½¿ç”¨UDPåè®®é€šè®¯ï¼ŒåŒæ—¶TCPä¹Ÿè¢«æ”¯æŒOpenVPNè¿æ¥èƒ½é€šè¿‡å¤§å¤šæ•°çš„ä»£ç†
	æœåŠ¡å™¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿåœ¨NATçš„ç¯å¢ƒä¸­å¾ˆå¥½åœ°å·¥ä½œã€‚OpenVPNæœåŠ¡ç«¯å…·æœ‰å‘å®¢æˆ·ç«¯"æ¨é€"æŸäº›ç½‘ç»œé…ç½®ä¿¡æ¯çš„åŠŸèƒ½ï¼Œè¿™äº›ä¿¡æ¯åŒ…æ‹¬ï¼šIPåœ°å€ã€è·¯ç”±è®¾
	ç½®ç­‰ã€‚OpenVPNæä¾›äº†ä¸¤ç§è™šæ‹Ÿç½‘ç»œæ¥å£ï¼šé€šç”¨Tun/Tapé©±åŠ¨ï¼Œé€šè¿‡å®ƒä»¬ï¼Œå¯ä»¥å»ºç«‹ä¸‰å±‚IPéš§é“ï¼Œæˆ–è€…è™šæ‹ŸäºŒå±‚ä»¥å¤ªç½‘ï¼Œåè€…å¯ä»¥ä¼ é€ä»»ä½•ç±»å‹
	çš„äºŒå±‚ä»¥å¤ªç½‘ç»œæ•°æ®ã€‚ä¼ é€æ•°æ®å¯é€šè¿‡LZOç®—æ³•å‹ç¼©ã€‚OpenVPN2.0ä»¥åç‰ˆæœ¬æ¯ä¸ªè¿›ç¨‹å¯ä»¥åŒæ—¶ç®¡ç†æ•°ä¸ªå¹¶å‘éš§é“ã€‚
		OpenVPNä½¿ç”¨é€šç”¨ç½‘ç»œåè®®ï¼ˆTCPä¸UDPï¼‰çš„ç‰¹ç‚¹ä½¿å®ƒæˆä¸ºIPsecç­‰åè®®çš„ç†æƒ³æ›¿ä»£ï¼Œå°¤å…¶æ˜¯åœ¨ISPï¼ˆInternet service providerï¼‰è¿‡æ»¤æŸäº›
	ç‰¹å®šVPNåè®®çš„æƒ…å†µä¸‹ã€‚
		åœ¨é€‰æ‹©åè®®æ—¶å€™ï¼Œéœ€è¦æ³¨æ„2ä¸ªåŠ å¯†éš§é“ä¹‹é—´çš„ç½‘ç»œçŠ¶å†µï¼Œå¦‚æœ‰é«˜æŒºæˆ–è€…ä¸¢åŒ…è¾ƒå¤šçš„æƒ…å†µä¸‹ï¼Œè¯·å…ˆæ‹©TCPåè®®ä½œä¸ºåº•å±‚åè®®ï¼ŒUDPåè®®ç”±äºå­˜
	åœ¨æ— è¿æ¥å’Œé‡ä¼ æœºåˆ¶ï¼Œå¯¼è‡´è¦éš§é“ä¸Šå±‚çš„åè®®è¿›è¡Œé‡ä¼ ï¼Œæ•ˆç‡éå¸¸ä½ä¸‹ã€‚è¿™é‡Œå»ºè®®ç”¨TCPåè®®æ–¹å¼ã€‚
		å‚è€ƒï¼š
		http://www.baike.com/wiki/OpenVPN 
		http://zh.wikipedia.org/zh-cn/OpenVPN 
		OpenVPNçš„æŠ€æœ¯æ ¸å¿ƒæ˜¯è™šæ‹Ÿç½‘å¡ï¼Œå…¶æ¬¡æ˜¯SSLåè®®ï¼ŒSSLåè®®ç­¾åå·±é˜è¿°è¿‡ï¼Œè¿™é‡Œé‡ç‚¹å¯¹è™šæ‹Ÿç½‘å¡åŠå…¶åœ¨OpenVpnçš„ä¸­çš„å·¥ä½œæœºç†è¿›è¡Œä»‹ç»ï¼š
		è™šæ‹Ÿç½‘å¡æ˜¯ä½¿ç”¨ç½‘ç»œåº•å±‚ç¼–ç¨‹æŠ€æœ¯å®ç°çš„ä¸€ä¸ªé©±åŠ¨è½¯ä»¶ï¼Œå®‰è£…ååœ¨ä¸»æœºä¸Šå¤šå‡ºä¸€ä¸ªç½‘å¡ï¼Œå¯ä»¥åƒå…¶ä»–ç½‘å¡å‘é€æ•°æ®ï¼Œåˆ™æœåŠ¡ç¨‹åºå¯ä»¥åœ¨åº”
	ç”¨å±‚æ‰“å¼€è™šæ‹Ÿç½‘å¡ï¼Œå¦‚æœåº”ç”¨è½¯ä»¶ï¼ˆå¦‚IEï¼‰å‘è™šæ‹Ÿç½‘å¡å‘é€æ•°æ®ï¼Œåˆ™æœåŠ¡ç¨‹åºå¯ä»¥è¯»å–åˆ°è¯¥æ•°æ®ï¼Œå¦‚æœæœåŠ¡ç¨‹åºå†™åˆé€‚çš„æ•°æ®åˆ°è™šæ‹Ÿç½‘å¡
	ï¼Œåº”ç”¨è½¯ä»¶ä¹Ÿå¯ä»¥æ¥æ”¶å¾—åˆ°ã€‚è™šæ‹Ÿç½‘å¡åœ¨å¾ˆå¤šçš„æ“ä½œç³»ç»Ÿä¸‹éƒ½æœ‰ç›¸åº”çš„å®ç°ï¼Œè¿™ä¹Ÿæ˜¯OpenVpnèƒ½å¤Ÿè·¨å¹³å°ä¸€ä¸ªå¾ˆé‡è¦çš„ç†ç”±ã€‚
		åœ¨OpenVpnä¸­ï¼Œå¦‚æœç”¨æˆ·è®¿é—®ä¸€ä¸ªè¿œç¨‹è™šæ‹Ÿåœ°å€ï¼ˆå±äºè™šæ‹Ÿç½‘å¡é…ç”¨åœ°å€ç³»åˆ—ï¼ŒåŒºåˆ«äºçœŸå®åœ°å€ï¼‰ï¼Œåˆ™æ“ä½œç³»ç»Ÿä¼šé€šè¿‡è·¯ç”±æœºåˆ¶å°†æ•°æ®åŒ…ï¼ˆ
	ï¼ˆTUNæ¨¡å¼ï¼‰æˆ–æ•°æ®å¸§ï¼ˆTAPæ¨¡å¼ï¼‰å‘é€åˆ°è™šæ‹Ÿç½‘å¡ä¸Šï¼ŒæœåŠ¡ç¨‹åºæ¥æ”¶è¯¥æ•°æ®å¹¶è¿›è¡Œç›¸åº”çš„å¤„ç†åï¼Œé€šè¿‡SOCKETä»å¤–ç½‘ä¸Šå‘é€å‡ºå»ï¼Œè¿œç¨‹æœåŠ¡ç¨‹
	åºé€šè¿‡SOCKETä»å¤–ç½‘ä¸Šæ¥æ”¶æ•°æ®ï¼Œå¹¶è¿›è¡Œç›¸åº”å¤„ç†åï¼Œå‘é€ç»™è™šæ‹Ÿç½‘å¡ï¼Œåˆ™åº”ç”¨è½¯ä»¶å¯ä»¥æ¥æ”¶åˆ°ï¼Œå®Œæˆäº†ä¸€ä¸ªå•å‘ä¼ è¾“è¿‡ç¨‹ï¼Œåä¹‹äº¦ç„¶ã€‚
		OpenVPNä½¿ç”¨OpenSSLåº“åŠ å¯†æ•°æ®äºæ§åˆ¶ä¿¡æ¯ï¼šå®ƒä½¿ç”¨äº†OpenSSLçš„åŠ å¯†ä»¥åŠéªŒè¯åŠŸèƒ½ï¼Œæ„å‘³ç€ï¼Œå®ƒèƒ½å¤Ÿä½¿ç”¨ä»»ä½•OpenSSLæ”¯æŒçš„ç®—æ³•ã€‚å®ƒæ
	ä¾›äº†å¯é€‰æ•°æ®åŒ…HMACåŠŸèƒ½ä»¥æé«˜è¿æ¥çš„å®‰å…¨æ€§ã€‚æ­¤å¤–ï¼ŒOpenSSLçš„ç¡¬ä»¶åŠ é€Ÿä¹Ÿèƒ½æé«˜å®ƒçš„æ€§èƒ½ã€‚
		1ã€openvpné©±åŠ¨éƒ¨åˆ†å®ç°äº†ç½‘å¡å¤„ç†å’Œå­—ç¬¦è®¾å¤‡ã€‚ç½‘å¡å¤„ç†ç½‘ç»œæ•°æ®ï¼Œå­—ç¬¦è®¾å¤‡å®Œæˆä¸åº”ç”¨å±‚çš„æ•°æ®äº¤äº’ã€‚
		2ã€ä½¿ç”¨openvpnå¿…é¡»ä¿®æ”¹è·¯ç”±è¡¨
		å·¥ä½œè¿‡ç¨‹ å‘é€æ•°æ®ï¼š
		1ã€åº”ç”¨ç¨‹åºå‘é€ç½‘ç»œæ•°æ®
		2ã€ç½‘ç»œæ•°æ®æ ¹æ®ä¿®æ”¹åçš„è·¯ç”±è¡¨æŠŠæ•°æ®è·¯ç”±åˆ°è™šæ‹Ÿç½‘å¡
		3ã€è™šæ‹Ÿç½‘å¡æŠŠæ•°æ®æ”¾åˆ°æ•°æ®é˜Ÿåˆ—ä¸­
		4ã€å­—ç¬¦è®¾å¤‡ä»æ•°æ®é˜Ÿåˆ—ä¸­å–æ•°æ®ï¼Œç„¶åé€ç»™åº”ç”¨å±‚
		5ã€åº”ç”¨å±‚æŠŠæ•°æ®è½¬å‘ç»™ç‰©ç†ç½‘å¡
		6ã€ç‰©ç†ç½‘å¡å‘é€æ•°æ®
		
		æ¥æ”¶è¿‡ç¨‹ï¼š
		1ã€ç‰©ç†ç½‘å¡æ¥å—åˆ°æ•°æ®ï¼Œå¹¶ä¼ é€åˆ°åº”ç”¨ç©ºé—´
		2ã€åº”ç”¨å®ˆæŠ¤ç¨‹åºé€šè¿‡å­—ç¬¦è®¾å¤‡æŠŠæ•°æ®è½¬ç»™é©±åŠ¨ç½‘å¡
		3ã€æ•°æ®é€šè¿‡è™šæ‹Ÿç½‘å¡é‡æ–°è¿›å…¥ç½‘ç»œæ¨è
		4ã€ç½‘ç»œæ¨èæŠŠæ•°æ®ä¼ ç»™ä¸Šå±‚çœŸå®çš„åº”ç”¨ç¨‹åºã€‚

â—¾ 1.2.6 openvpn ç”Ÿäº§ç¯å¢ƒå¸¸ç”¨åœºæ™¯ï¼š
	â—¾ 1.2.6.1 è¿œç¨‹æ‹¨å·è®¿é—®ä¼ä¸šç½‘ç»œæˆ–IDCæœºæˆ¿
		å³é€šè¿‡ä¸ªäººç”µè„‘è¿œç¨‹æ‹¨å·åˆ°ä¼ä¸šåŠå…¬ç½‘ç»œã€‚
		ä¸€èˆ¬ä¸ºä¼ä¸šå†…éƒ¨å‘˜å·¥å‡ºå·®ã€ä¼‘å‡æˆ–ç‰¹æ®Šæƒ…å†µä¸‹åœ¨è¿œç¦»åŠå…¬å®¤çš„æ—¶å€™ï¼Œåˆæœ‰éœ€æ±‚è®¿é—®å…¬å¸çš„å†…éƒ¨ç½‘ç»œè·å–ç›¸å…³èµ„æºï¼Œå°±å¯ä»¥é€šè¿‡VPNæ‹¨å·åˆ°å…¬
	å¸å†…éƒ¨ã€‚ç½‘ç»œè·å–ç›¸å…³èµ„æºï¼Œå°±å¯ä»¥é€šè¿‡VPNæ‹¨å·åˆ°å…¬å¸å†…éƒ¨ã€‚æ­¤æ—¶è¿œç¨‹æ‹¨å·çš„å‘˜å·¥å’ŒåŠå…¬å®¤çš„å‘˜å·¥ä»¥åŠå…¶ä»–æ‹¨å·çš„å‘˜å·¥ä¹‹é—´éƒ½ç›¸å½“äºä¸€ä¸ªå±€åŸŸ
	ç½‘ç»œå†…ã€‚ä¾‹å¦‚ï¼šè®¿é—®å†…éƒ¨çš„åŸŸæ§åˆ¶å™¨ï¼Œæ–‡ä»¶æœåŠ¡å™¨ï¼ŒOAç³»ç»Ÿï¼ŒHTTPæœåŠ¡ï¼Œå†…ç½‘é£ç§‹èŠå¤©å·¥å…·ç­‰å±€åŸŸç½‘æœåŠ¡åº”ç”¨ã€‚
		å¯¹äºè¿ç»´äººå‘˜å°±æ˜¯éœ€è¦ä¸ªäººç”µè„‘è¿œç¨‹æ‹¨å·åˆ°ä¼ä¸šç½‘ç«™IDCæœºæˆ¿ï¼Œè¿œç¨‹ç»´æŠ¤æœåŠ¡å™¨ã€‚
		æ­¤ç‚¹æ˜¯æŠ€æœ¯äººå‘˜ç‰¹åˆ«æ˜¯è¿ç»´äººå‘˜åœ¨å·¥ä½œä¸­ä¼šç»å¸¸ç”¨è¿™ä¸ªæ–¹æ³•ç»´æŠ¤å¤§é‡çš„æœºæˆ¿å†…æ— å¤–ç½‘IPçš„æœåŠ¡æœºå™¨åŠç½‘ç»œè®¾å¤‡ã€‚
		è®²è§£å°±ä¸šç­æ¶æ„å›¾ï¼šç‰¤ç‰›é˜µæ³•
	â—¾ 1.2.6.2 ä¼ä¸šå¼‚åœ°å†…éƒ¨ç½‘ç»œé€šè¿‡VPNè¿æ¥æˆå±€åŸŸç½‘
		åœ¨å…¬å¸çš„åˆ†æ”¯æœºæ„çš„å±€åŸŸç½‘å’Œå…¬å¸æ€»éƒ¨LANä¹‹é—´çš„VPNè¿æ¥ã€‚é€šè¿‡å…¬ç½‘Internetå»ºç«‹VPNå°†å…¬å¸åœ¨å„åœ°çš„åˆ†æ”¯æœºæ„çš„LANè¿æ¥åˆ°å…¬å¸æ€»éƒ¨çš„LANã€‚
	ä¾‹å¦‚ï¼šå„å¤§è¶…å¸‚ä¹‹é—´ä¸šåŠ¡ç»“ç®—ç­‰ã€‚
		è¿™æ˜¯ç”±äºåœ°åŸŸçš„åŸå› è€Œäº§ç”Ÿçš„VPNçš„éœ€æ±‚ï¼Œé€šè¿‡VPNè®©æ­¥åŒåœ°åŸŸå†…çš„æœºå™¨å¯ä»¥äº’ç›¸è®¿é—®ï¼Œå°±å¥½åƒæ˜¯ä¸€ä¸ªå±€åŸŸç½‘ä¸€æ ·ã€‚ä¾‹å¦‚ï¼šåŠå…¬å®¤äº’è”ååŒåŠ
	å…¬ï¼Œæœºæˆ¿äº’è”æ•°æ®åŒæ­¥åŠä¸šåŠ¡è®¿é—®ç­‰ã€‚
	
	â—¾ 1.2.6.3 äº’è”ç½‘å…¬å¸å¤šIDCæœºæˆ¿ä¹‹é—´é€šè¿‡VPNè¿æ¥äº¤æ¢æ•°æ®
		æ­¤å¤„æ˜¯è¿ç»´æ¶æ„äººå‘˜éœ€è¦è€ƒè™‘çš„é—®é¢˜ã€‚ä¸åŒæœºæˆ¿ä¹‹é—´ä¸šåŠ¡ç®¡ç†å’Œä¸šåŠ¡è®¿é—®ï¼Œæ•°æ®æµåŠ¨ã€‚
	
	â—¾ 1.2.6.4 ä¼ä¸šå¤–éƒ¨ VPNæœåŠ¡
		åœ¨ä¾›åº”å•†ã€åˆä½œä¼™ä¼´çš„LANå’Œæœ¬å…¬å¸çš„LANä¹‹é—´å»ºç«‹VPNæœåŠ¡ã€‚
		ä»æŠ€æœ¯ä¸Šè®²ï¼Œ2ï¼Œ3ï¼Œ4çš„å®ç°æ˜¯ä¸€æ ·çš„ã€‚


â—¾ 1.2.7	 ä¼ä¸šäº§ç”Ÿåœºæ™¯å¸¸ç”¨VPNå·¥ä½œç»“æ„å›¾
	â—¾ 1.2.7.1ä¼ä¸švpnè¿œç¨‹æ‹¨å·è®¿é—®åœºæ™¯é€»è¾‘å›¾	
			â”Œ------------------------------------------------------------------------------â”
			|								IDC ä¸‰å…ƒæ¡¥æœºæˆ¿							       |
			| â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”									â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
			| â”‚|--keys			 â”‚\									â”‚				  	 â”‚ |
			| â”‚|  |--ca.crt		 â”‚ \							  â•± Lan Server1  	  	 â”‚ |
			| â”‚|  |--ca.key 	 â”‚  \â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”	    â•±	â”‚ eth0:192.168.1.100 â”‚ |
			| â”‚|  |--db1024.pem  â”‚   â”‚  Vpn Server	      â”‚	  â•±	â”‚				  	 â”‚ |
			| â”‚|  |--server.crt  â”‚   â”‚ eth0:10.0.2.15     â”‚	â•±		â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
			| â”‚|  |--server.csr  â”‚   â”‚ eth1:192.168.1.104 â”‚	â•²							   |
			| â”‚|  |--server.key  â”‚  /â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜	  â•²	â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” |
			| â”‚|  `--ta.key      â”‚ /	 /			\			â•²	â”‚				     â”‚ |
			| â”‚`--server.conf	 â”‚/ 	/			 \		  	  â•²  Lan Server2	     â”‚ |	 
			| â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜	   /			  \				â”‚ eth0:192.168.1.100 â”‚ |
			|						  /				   \			â”‚				     â”‚ |
			|						 /				    \			â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ |
			|					    /				â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”			   |
			|					   /				â”‚ ç›®åœ°å€ï¼š192.168.1/24 â”‚			   |
			|					  /					â”‚ æºåœ°å€ï¼š192.168.0/24 â”‚			   |
			|					 /					â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜			   |
			â””-------------------/----------------------------------------------------------â”˜
				 |			   / 
				 |			  /
 â”Œ----------------------â”    / â”Œ-----------------------â”
 |	    è¿œç¨‹æ‹¨å·	  	|   /  |ç›®åœ°å€ï¼š192.168.1.0/24 |
 â””----------------------â”˜  /   |æºåœ°å€ï¼š10.8.0.6/24    |
						  /    â””-----------------------â”˜
	                     /		|
						/		|	   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
					   /		|     /â”‚								â”‚
					  /			|    / â”‚								â”‚
	    		 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚								â”‚
				 â”‚					â”‚  â”‚ D:\data\OpenVPN\config\oldboy  â”‚
				 â”‚					â”‚  â”‚ ğŸ“°ca.crt						â”‚
				 â”‚	   æˆ‘ä»¬çš„åŠ		â”‚  â”‚ ğŸ“°oldboy.crt					â”‚
				 â”‚	   				â”‚  â”‚ ğŸ“„oldboy.key					â”‚
				 â”‚     å…¬å®¤ç”µè„‘		â”‚  â”‚ ğŸ“„oldboy_vpn.ovpn			    â”‚
				 â”‚	   			  	â”‚  â”‚ è·¯ç”±ï¼špush"reute 172.16.1.0.." â”‚
				 â”‚				    â”‚  â”‚								â”‚
				 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚								â”‚
									 \ â”‚								â”‚
									  \â”‚								â”‚
									   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

									   
									   
									   
									   
					
â—¾ 1.2.8	 ç”Ÿäº§åœºæ™¯é€»è¾‘å›¾è¯¦ç»†æè¿°
			åœ¨æœ¬æ–‡è®²è§£çš„VPNç¯å¢ƒä¸­å¦‚ä¸Šå›¾å½“ç”¨æˆ·ä»å®¶é‡Œæ‹¨å·ä¸Šç½‘åï¼Œé€šè¿‡openvpn clientè½¯ä»¶å¯ä»¥æ‹¨å·åˆ°Openvpn Server(ip:124.43.12.115)ä¸Šï¼Œ
		æ­¤æ—¶ï¼Œåœ¨ä¸ªäººæ¯”è¾ƒæœ¬å’ŒPpenvpn Serverä¹‹é—´ä¼šå»ºç«‹ä¸€ä¸ªåŠ å¯†çš„ä¸“ç”¨éš§é“ï¼ˆé»˜è®¤ä¼šä½¿ç”¨10.6.27.0æ®µçš„IPï¼‰ï¼Œä½¿å¾—ä¸ªäººç¬”è®°æœ¬å¯ä»¥è®¿é—®åˆ°
		Openvpn Serverçš„å†…ç½‘å¡ IP åœ°å€ï¼ˆ127.16.1.161ï¼‰ï¼Œä½†æ˜¯ï¼Œæ­¤æ—¶é€šè¿‡æ¯”è¾ƒæœ¬ç›´æ¥è®¿é—®å’ŒOpenvpn Serverç›¸åŒçš„å†…éƒ¨å±€åŸŸç½‘ä¸­çš„å…¶ä»–Server
		(ip:172.16.1.13)æ˜¯è®¿é—®ä¸åˆ°çš„ï¼Œå› ä¸ºOpenvpn Serverä¸çŸ¥é“å¦‚ä½•å¸®ä½ è½¬å‘è¿™ä¸ªè®¿é—®è¯·æ±‚ã€‚
			ç”Ÿäº§ç¯å¢ƒä¸­çš„å¸¸ç”¨åšæ³•æ˜¯ï¼Œå½“ä¸ªäººæ¯”è¾ƒæœ¬è¿æ¥ä¸ŠOpenvpn Serverä¹‹åï¼Œåœ¨Openvpn Serverä¸ŠåŠ å…¥ä¸€æ¡é˜²ç«å¢™ NAT è§„åˆ™ï¼ˆéƒ¨ç½²æ—¶äººå·¥å¢åŠ 
		ï¼‰ï¼Œä½¿å¾—å½“ç¬”è®°æœ¬çš„è®¿é—®è¯·æ±‚ä¼ªè£…æˆOpenvpn Serverçš„è¯·æ±‚ï¼ˆå³æŠŠç¬”è®°æœ¬çš„è®¿é—®æºåœ°å€æ›´æ”¹ä¸ºOpenvpn Swerverï¼‰çš„å†…ç½‘å¡IPåœ°å€ï¼Œæœ¬æ–‡ä¸º
		172.16.1.161ï¼Œè¿™æ ·ï¼Œä»ç¬”è®°æœ¬å°±å¯ä»¥è½»æ¾è®¿é—®å’ŒOpenvpn Server ç›¸åŒçš„å†…éƒ¨å±€åŸŸç½‘çš„å…¶å®ƒ Server(ip:127.16.1.13)äº†ï¼Œå› ä¸ºç»è¿‡NATè½¬æ¢
		åï¼ŒäºŒè€…çœ‹èµ·æ¥æ˜¯åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ç½‘æ®µå†…ã€‚åœ¨è®¿é—®è¯·æ±‚æ—¶ï¼Œç¬”è®°æœ¬çš„IPä»¥åŠè¢«è½¬æ¢ä¸ºOpenvpn Server çš„å†…ç½‘å¡IPåœ°å€ï¼Œæœ¬æ–‡ä¸º127.16.1.161
		ï¼Œè€Œå’ŒOpenvpn Server ç›¸åŒçš„å†…éƒ¨å±€åŸŸç½‘çš„æ‰€æœ‰Serverçš„IPæ®µéƒ½åœ¨172.16.1.0/24æ®µï¼Œè¿™æ ·å®¶é‡Œçš„ç¬”è®°æœ¬ä¹Ÿå°±ç›¸å½“äºåœ¨172.16.1.0/24äº†ï¼Œä»
		è€Œå®ç°å±€åŸŸç½‘äº’ç›¸è®¿é—®çš„æ•ˆæœã€‚
			å½“ç„¶ï¼Œopenvpnçš„åŠŸèƒ½åŠåº”ç”¨ä¸ä»…ä»…æ˜¯æˆ‘ä¸Šé¢æè¿°çš„ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿˜å¯ä»¥æœ‰å…¶ä»–çš„ä½¿ç”¨æ–¹æ¡ˆï¼Œä¾‹å¦‚ï¼šé…ç½®VPNå®ç°"ç¿»å¢™"åŠŸèƒ½ã€‚åœ¨å¤§
		å®¶å­¦ä¹ ä½¿ç”¨æ—¶ï¼Œå¯ä»¥æŸ¥é˜…ç›¸å…³æ–‡æ¡£ï¼Œé€‚å½“çš„æ‰©å±•ä½¿ç”¨æ–¹æ³•ã€‚æ–‡æœ¬çš„æ–‡æ¡£é€‚åˆäºä¸ªäººå®¢æˆ·ç«¯å’Œä¼ä¸šæˆ–IDCæœºæˆ¿å†…éƒ¨LANè¿æ¥ï¼Œä¹Ÿé€‚åˆä¸¤ä¸ªéƒ¨åŒåœ°åŸŸ
		çš„ä¼ä¸šæˆ–IDCæœºæˆ¿LANä¹‹é—´çš„äº’è¿ã€‚
			
â—¼ 1.3 openvpn ç”Ÿäº§ç¯å¢ƒéœ€æ±‚åŠç¯å¢ƒæ¨¡æ‹Ÿ
	â—¾ 1.3.1 ç¯å¢ƒéœ€æ±‚
			
			â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
			â”‚	è®¾å¤‡/é¡¹ç›®			 	  â”‚		IP 												 		  	   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			â”‚ 	ç¬”è®°æœ¬æˆ–PC(adsl ä¸Šç½‘)	  â”‚	10.0.0.0/24ï¼ˆåŠå…¬å®¤ DHCPï¼‰				 					 	   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			â”‚ 	Openvpn Serverï¼ˆåŒç½‘å¡ï¼‰ï¼šâ”‚	eth0:10.0.0.28ï¼ˆå¤–ç½‘ï¼‰	 eth1:172.16.1.28ï¼ˆå†…ç½‘ï¼‰			 	   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			â”‚	IDC æœºæˆ¿å†…éƒ¨å±€åŸŸç½‘æœåŠ¡å™¨  â”‚	172.16.1.0/24ï¼ˆIDCæœºæˆ¿å±€åŸŸç½‘æœåŠ¡å™¨æ— å¤–ç½‘IPï¼ŒåŒå¸Œæœ›ads1ä¸Šç½‘ç¬”è®°æœ¬   â”‚
			â”‚							  â”‚ï¼ˆå³è¿ç»´äººå‘˜ï¼‰ï¼Œ ä¸åŒç½‘ç»œå†…èƒ½å¤Ÿç›´æ¥è®¿é—®å®ƒã€‚						   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			â”‚ 	APP Server				  â”‚	eth0:172.16.1.17ï¼ˆå†…ç½‘ï¼‰		 	  	   						   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			â”‚ 	å®ç°éœ€æ±‚				  â”‚	åœ¨è¿œç«¯é€šè¿‡vpnå®¢æˆ·ç«¯ï¼ˆç¬”è®°æœ¬ï¼‰æ‹¨å·åˆ°vpnserverï¼Œå½“ç„¶åœ¨ç¬”è®°æœ¬ç”µè„‘ä¸Šå¯ â”‚
			â”‚							  â”‚	ä»¥ç›´æ¥è®¿é—®vpnserveræ‰€åœ¨å±€åŸŸç½‘å†…çš„å¤šä¸ªserverï¼Œè¿›è¡Œç®¡ç†ç»´æŠ¤ã€‚		   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			â”‚																								   â”‚
			â”‚	ç¯å¢ƒï¼š																						   â”‚
			â”‚	vpnserver:																					   â”‚
			â”‚	eth0:10.0.0.28	ï¼ˆå¤–ç½‘IPï¼‰																	   â”‚
			â”‚		GW:10.0.0.254ï¼Œdns:8.8.8.8																   â”‚
			â”‚	eth1:172.16.1.28ï¼ˆå†…ç½‘IPï¼‰																	   â”‚
			â”‚		GW:ä¸é…																					   â”‚
			â”‚	æç¤ºï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥pingé€šclient eth0 ipã€‚													   â”‚
			â”‚																								   â”‚
			â”‚																						   		   â”‚
			â”‚	clientï¼š																					   â”‚
			â”‚	eth0:172.16.1X																	   			   â”‚
			â”‚		GW:è·¯ç”±å™¨ã€‚															   	   				   â”‚
			â”‚	æç¤ºï¼šæ£€æŸ¥æ˜¯å¦å¯ä»¥ ping é€š client eth1 ipã€‚													   â”‚
			â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ 
â—¾ 1.3.1 å¤§è§„æ¨¡é›†ç¾¤ç¯å¢ƒ VPN é€»è¾‘æ¶æ„		
			
			
			
			
			
			
			
			
â—¾ 1.3.4 æŸ¥çœ‹linux ç³»ç»Ÿç¯å¢ƒ
	c7.4:
		[root@localhost ~]# cat /etc/redhat-release â—€â–¬â–¬åŒlsb_release -d 
		CentOS Linux release 7.4.1708 (Core)
		[root@localhost ~]# uname -r
		3.10.0-693.el7.x86_64
		[root@localhost ~]# uname -m æ˜¯32ä½è¿˜æ˜¯64ä½ï¼Œx86_64 è¡¨ç¤º 64 ä½ã€‚
		x86_64
		æç¤ºï¼šä¹Ÿå¯ä»¥ç”¨uname -a å’Œ lsb_release -a æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚
			
â—¾ 1.3.5 é…ç½® VPN æœåŠ¡å™¨æ—¶é—´åŒæ­¥
		æ‰‹å·¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤
		[root@localhost ~]# /usr/sbin/ntpdate pool.ntp.org
		16 Aug 07:05:02 ntpdate[2886]: adjust time server 182.92.12.11 offset 0.001803 sec 
		åŠ å…¥åˆ°å®šæ—¶ä»»åŠ¡
		å‘½ä»¤ï¼š
		[root@localhost ~]# echo '#time sync' >>/var/spool/cron/root
		[root@localhost ~]# echo '*/5 * * * * /usr/sbin/ntpdate pool.ntp.org > /dev/null 2>&1' >>/var/spool/cron/root crontab -l
		
		è¿‡ç¨‹ï¼š
		[root@localhost ~]# echo '#time sync' >>/var/spool/cron/root 
		[root@localhost ~]# echo '*/5 * * * * /var/sbin/ntpdate pool.ntp.org >/dev/null 2>&1' >>/var/spool/cron/root
		[root@localhost ~]# crontab -l
		#time sync
		*/5 * * * * /var/sbin/ntpdate pool.ntp.org >/dev/null 2>&1
		æç¤ºï¼šæ­¤æ­¥éª¤å¾ˆé‡è¦ï¼Œå¦‚æœvpnæœåŠ¡å™¨å’Œæ‹¨å·çš„è®¡ç®—æœºå®¢æˆ·ç«¯ä¸ä¸€è‡´ï¼Œå¯èƒ½ä¼šå¯¼è‡´VPNè¿æ¥å¤±è´¥ã€‚
		å…ˆæœåŠ¡æ®µå½“å‰åŒæ­¥ç„¶ååœ¨é…ç½®åˆ°å®šæ—¶ä»»åŠ¡é‡Œä¸ç„¶å®šæ—¶ä»»åŠ¡ä¸€å€¼ä¸æ‰§è¡Œï¼Œæ—¶é—´ä¸€ç›´ä¸åŒæ­¥
â—¼ 1.4 openvpn ç”Ÿäº§ç¯å¢ƒå®æˆ˜éƒ¨ç½²
		
â—¾ 1.4.1 å»ºç«‹Openvpnè½¯ä»¶å­˜æ”¾ç›®å½•
			mkdir -p /home/oldboy/tools/openvpn
			cd /home/oldboy/tools/openvpn
			æ“ä½œè¿‡ç¨‹ï¼š
			[root@localhost ~]# mkdir /home/oldboy/tools/openvpn -p
			[root@localhost ~]# cd /home/oldboy/tools/openvpn/
			ä¸Šä¼ å®Œæ¯•åçš„ vpn è½¯ä»¶å¦‚ä¸‹ï¼š
			[root@localhost ~]# ls -l
			total 1252 
			-rw-r--r--  1 root root 583045 Aug 13  2011 lzo-2.06.tar.gz
			-rw-r--r--  1 root root 911158 Jul  9  2014 openvpn-2.2.2.tar.gz
			æç¤ºï¼šé€šè¿‡ä¸Šä¼ å‘½ä»¤æˆ–è€…ftpä¼ ä¸‹vpnè½¯ä»¶ï¼Œç„¶åä¹Ÿå¯ä»¥å»ç½‘ç»œä¸Šå»wgetä¸‹è½½
		
â—¾ 1.4.2 å®‰è£… lzo å‹ç¼©æ¨¡å—
			åœ¨å®‰è£…openvpnè½¯ä»¶å‰æˆ‘ä»¬å…ˆæ¥å®‰è£…ä¸‹lzoå‹ç¼©æ¨¡å—ã€‚
			æ“ä½œå‘½ä»¤ï¼š
			[root@localhost openvpn]# wget http://www.oberhumer.com/opensource/lzo/download/lzo-2.06.tar.gz
			[root@localhost openvpn]# tar zxf lzo-2.06.tar.gz
			[root@localhost openvpn]# cd lzo-2.06
			[root@localhost openvpn]# ./configure
			[root@localhost openvpn]# make
			[root@localhost openvpn]# make install
			[root@localhost openvpn]# cd ../
			ä¸‹è½½åœ°å€ï¼šhttp://www.oberhumer.com/opensource/lzo/download/
			å¯»æ‰¾è½¯ä»¶æ–¹æ³•ï¼šæµè§ˆå™¨æ‰“å¼€è°·æ­Œæœç´¢ï¼Œhttp://www.google.com.tw ç„¶åå…³é”®å­—ï¼šdownload è½¯ä»¶æŠ¥åï¼Œå¦‚ï¼šdownload lzo-2.0.6.tar.gz
		
			æç¤º:ç¡®ä¿æ¯ä¸€æ­¥çš„æœ€åç»“æœæ­¥èƒ½æœ‰é”™è¯¯
			
		
		
		
â—¾ 1.4.3 å®‰è£… openvpn è½¯ä»¶ 
			æ“ä½œå‘½ä»¤ï¼š
			#wget http://www.openvpn.net/release/openvpn-2.2.2.tar.gz
			tar zxf openvpn-2.2.2.tar.gz
			cd openvpn-2.2.2
			./configure --with-lzo-headers=/usr/local/include --with-lzo-lib=/usr/local/lib 
			make 
			make install
			cd ../
			æ“ä½œè¿‡ç¨‹ï¼š
			[root@localhost openvpn]# tar zxf openvpn-2.2.2.tar.gz
			[root@localhost openvpn]# cd openvpn-2.2.2
			[root@localhost openvpn-2.2.2]# ./configure --with-lzo-headers=/usr/local/include --with-lzo-lib=/usr/local/lib
			[root@localhost openvpn-2.2.2]# make 
			[root@localhost openvpn-2.2.2]# make install
			[root@localhost openvpn-2.2.2]# cd ..
			æç¤ºï¼šconfigure:error:OpenSSL Crypto headers not found.
			è§£ç­”ï¼šå‰é¢è®²è¿‡openvpné€šä¿¡åŸç†éœ€è¦SSLæ”¯æŒã€‚
			[root@bogon openvpn-2.2.2]# rpm -qa|grep openssl
			openssl-1.0.2k-8.el7.x86_64
			openssl-libs-1.0.2k-8.el7.x86_64
			xmlsec1-openssl-1.2.20-5.el7.x86_64
			[root@localhost openvpn]# yum install openssl* -y
			ç•¥ã€‚ã€‚ã€‚ã€‚
			
			æ³¨æ„ï¼šå¯æ‰§è¡Œæ–‡ä»¶å®‰è£…è·¯å¾„ï¼š/usr/local/sbin/openvpn 
			[root@localhost openvpn]# which openvpn
			/usr/local/sbin/openvpn					#è¡¨ç¤ºè£…å¥½äº†

			[root@localhost openvpn]# ll /usr/local/sbin/openvpn 
			-rwxr-xr-x 1 root root 2863520 Aug 17 00:39 /usr/local/sbin/openvpn  #ä¹Ÿè¡¨ç¤ºå®‰è£…æˆåŠŸ
						
â—¾ 1.4.4 é…ç½® openvpn server-å»ºç«‹ CA(Certificate Authority)è¯ä¹¦
		åˆå§‹åŒ–é…ç½®å‘½ä»¤ï¼š
		cd /root/tools/openvpn/
		cd /root/test/openvpn-2.2.2/easy-rsa/2.0
		cp vars vars.roye.20180817			#å¤‡ä»½ vars
		vim vars #â—€â–¬ï¼ˆshift+g åˆ°ç»“å°¾åˆ é™¤ç»“å°¾æœ€å5è¡Œï¼Œå¦‚ä¸‹ï¼šï¼‰
		export KEY_COUNTRY="US"
		export KEY_PROVINCE="CA"
		export KEY_CITY="SanFrancisco"
		export KEY_ORG="Fort-Funston"
		export KEY_EMAIL="me@myhost.mydomain"
		
		å¢åŠ å¦‚ä¸‹å†…å®¹ï¼š
		#by roye 20080214
		export KEY_COUNTRY="CN"
		export KEY_PROVINCE="BJ"
		export KEY_CITY="Beijing"
		export KEY_ORG="roye"
		export KEY_EMAIL="154256500@qq.com"
		
	æç¤ºï¼š
		#å®šä¹‰ä½ æ‰€åœ¨çš„å›½å®¶ï¼Œ2ä¸ªå­—ç¬¦
		export KEY_COUNTRY=CN
		
		#ä½ æ‰€åœ¨çš„çœä»½
		export KEY_CITY=Beijing
		
		#ä½ æ‰€åœ¨çš„ç»„ç»‡
		export KEY_ORG="roye"
		
		#ä½ çš„é‚®ä»¶åœ°å€
		export KEY_EMAIL=154256500@qq.com 
		
	å¦‚æœæ˜¯openvpn-2.2.2.tar.gzåˆ™é»„è‰²ä¸ºç‰ˆæœ¬æ­¥åŒçš„åœ°æ–¹ï¼š

		[root@localhost ~]#tail -16 vars 
		#These are default values for fields
		#which will be placed in the certificate.
		#Don't leave any of these fields blank.
		#by roye 20180817

		export KEY_COUNTRY="CN"
		export KEY_PROVINCE="BJ"
		export KEY_CITY="Beijing"
		export KEY_ORG="oldboy"
		export KEY_EMAIL="154256500@qq.com"
		export KEY_EMAIL=154256500@qq.com
		export KEY_CN="CN"
		export KEY_NAME="oldboy"
		export KEY_OU="oldboy"
		export PKCS11_MODULE_PATH="changeme"
		export PKCS11_PIN=1234

		
		
		+-------------------------------------------------------------------------------------------------------------
		|æ­¤éƒ¨åˆ†å¯ä»¥å¿½ç•¥
        |
        |
		|	å¿«é€Ÿå…¨å‘½ä»¤è¡Œæ“ä½œï¼ˆä¸ç”¨vimï¼‰
		|	[root@localhost openvpn]# cd openvpn-2.2.2/easy-rsa/2.0/
		|	[root@localhost 2.0]# cp vars vars.oldboy.20180714
		|	[root@localhost 2.0]# tail -6 vars	
		|	# Don't leave any of these fields blank.
		|	export KEY_COUNTRY="US"
		|	export KEY_PROVINCE="CA"
		|	export KEY_CITY="SanFrancisco"
		|	export KEY_ORG="Fort-Funston"
		|	export KEY_EMAIL="me@myhost.mydomain"
		|	
		|	åˆ é™¤ç»“å°¾æœ€å 5 è¡Œï¼Œå³ä¸Šé¢ tail å‘½ä»¤åæ˜¾ç¤ºçš„è¡Œã€‚
		|	[root@localhost 2.0]# sed -i '$d' vars
		|	[root@localhost 2.0]# sed -i '$d' vars
		|	[root@localhost 2.0]# sed -i '$d' vars
		|	[root@localhost 2.0]# sed -i '$d' vars
		|	[root@localhost 2.0]# sed -i '$d' vars
		|	[root@localhost 2.0]# tail -1 vars
		|	
		|	#Don't leave any of these fields blank.
		|	æç¤ºï¼šåˆ é™¤æ–¹æ³•è¿˜æœ‰å¤æ‚æ–¹æ³•å¦‚ï¼šsed -e :a -e '$d;N;2,3ba' -e 'P;D' oldboy.log åŠ ç²—éƒ¨åˆ†ä½è¦åˆ é™¤æœ€åè¡Œçš„æ•°å­—ï¼Œæ­¥æ¨èç”¨è¿™ä¸ªã€‚
		|	
		|	æ·»åŠ ä¸‹é¢éœ€è¦çš„å†…å®¹
		|	cat >>vars <<EOF
		|	#by oldboy 20180814
		|	export KEY_COUNTRY="CN"
		|	export KEY_PROVINCE="BJ"
		|	export KEY_CITY="Beijing"
		|	export KEY_ORG="oldboy"
		|	export KEY_EMAIL="154256500@qq.com"
		|	EOF 
		|	
		|	[root@localhost 2.0]# tail -7 vars 
		|	#Don't leave any of these fields blank.
		|	#by oldboy 20180817
		|	
		|	export KEY_COUNTRY="CN"
		|	export KEY_PROVINCE="BJ"
		|	export KEY_CITY="Beijing"
		|	export KEY_ORG="oldboy"
		|	export KEY_EMAIL="154256500@qq.com"
		|	
		+-------------------------------------------------------------------------------------------------------------
		
		
		æç¤ºï¼šåœ¨ä¸‹æ–‡å»ºç«‹è¯ä¹¦æ—¶ï¼Œä¼šæç¤ºä¸Šé¢é…ç½®çš„å†…å®¹ï¼Œè¿™æ˜¯ç›´æ¥å›è½¦å°±å¥½äº†ï¼Œæ­¥éœ€è¦æ•²å­—ç¬¦äº†ã€‚
		å¼€å§‹åˆå§‹åŒ– PKI (public key infrastruction using certificates and private keys)
		
		ä¿®æ”¹å®Œvarsæ–‡ä»¶åï¼Œæ‰§è¡Œ source vars ä½¿å‰é¢å¯¹vars çš„ä¿®æ”¹ç”Ÿæ•ˆï¼š
		[root@localhost 2.0]# source vars
		NOTE: If you run ./clean-all, I will be doing a rm -rf on /root/test/openvpn-2.2.2/easy-rsa/2.0/keys
		
		ç„¶åæ ¹æ®æç¤ºæ‰§è¡Œ
		
		./clean-all  #<--æ¸…é™¤æ‰€æœ‰è¯ä¹¦ç›¸å…³
		./build-ca   #<--ç”Ÿæˆ CA è¯ä¹¦
		æç¤ºï¼šThe final command (build-cn) whill build the certificate authority (CA) certificate and key by invoking the interactive openssl command;
		
		æ“ä½œè¿‡ç¨‹ï¼š
		[root@localhost 2.0]# ./clean-all  <--æ¸…æ¥šæ‰€æœ‰è¯ä¹¦
		[root@localhost 2.0]# ./build-ca   <--åˆ›å»ºæ–°çš„ca è¯ä¹¦ ï¼Œca,ort,ca,keyã€‚æ³¨æ„ï¼Œä¸‹é¢æ˜¯è¾“å‡ºã€‚
		Generating a 1024 bit RSA private key
		.......++++++
		...++++++
		writing new private key to 'ca.key'
		-----
		You are about to be asked to enter information that will be incorporated
		into your certificate request.
		What you are about to enter is what is called a Distinguished Name or a DN.
		There are quite a few fields but you can leave some blank
		For some fields there will be a default value,
		If you enter '.', the field will be left blank.
		-----
		Country Name (2 letter code) [CN]:			#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		State or Province Name (full name) [BJ]:	#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		Locality Name (eg, city) [Beijing]:			#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		Organization Name (eg, company) [oldboy]:			#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		Organizational Unit Name (eg, section) [oldboy]:	#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		Common Name (eg, your name or your server's hostname) [CN]:oldboy  #åº”è¾“å…¥ VPN æœåŠ¡å™¨FQDN
		Name [oldboy]:								#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		Email Address [154256500@qq.com]:			#åˆšæ‰åœ¨é…ç½®æ–‡ä»¶é‡Œçš„é»˜è®¤å€¼
		
		æç¤ºï¼šNote that in the above sequence,most queried parameters were defaulted to the values set in the vars or vars.
		bat files. The only parameter which must be explicitly entered is the Common Name.In the example above,I used "oldboy".
		å®˜æ–¹çš„æç¤ºï¼šCommon Name å¿…é¡»è¦å¡«å†™ã€‚
		build-ca åç”Ÿæˆçš„caè¯ä¹¦:
		
		[root@bogon 2.0]# ll keys/					#æ“ä½œå®Œä¹‹åç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ CSè¯ä¹¦
		total 12
		-rw-r--r-- 1 root root 1314 Aug 17 10:41 ca.crt  <--CERTIFICATE
		-rw------- 1 root root  916 Aug 17 10:41 ca.key  <--RSA PRIVATE KEY
		-rw-r--r-- 1 root root    0 Aug 17 10:37 index.txt
		-rw-r--r-- 1 root root    3 Aug 17 10:37 serial
		 
		 ä»¥ä¸‹æ˜¯ 2.2.2ç‰ˆæœ¬çš„ç»“æœï¼š
		 [root@localhost ~]# source vars
		 NOTE:If you run ./clean-all, I will be doing a rm -rf on 
		 /root/tools/openvpn/openvpn-2.2.2/easy-rsa/2.0/keys 
		 [root@localhost 2.0]# ./clean-all
		 [root@localhost 2.0]# ./build-ca
		 Generating a 1024 bit RSA private key 
		 ..................+++++++++++
		 ............................++++++++++
		 writing new private key to 'ca.key'
		 ------
		 you are about to be asked to enter information that will be incorporated 
		 into your certificate request.
		 What you are about to enter is what is called a Distinguisbed Name or a DN.
		 There are quite a few fields but you can leave some blank
		 For some fields there will be a default value.
		 If you enter ',', the field will be left blank.
		 ----
		 Country Name (2 letter code) [CN]:
		 State or Province Name (full name)[BJ]:
		 Locality Name (eg,city)[Beijing]:
		 Organization  Name (eg,company)[oldboy]:
		 Organizational Unit Name (eg,section)[oldboy]:
		 Common Name (eg,your name or your server's hostname)[CN]:oldboy
		 Name [oldboy]:
		 Email Address [154256500@qq.com]:
		 [root@localhost 2.0]# ll keys/
		 total 12
		-rw-r--r-- 1 root root 1314 Aug 17 10:41 ca.crt  <--CERTIFICATE
		-rw------- 1 root root  916 Aug 17 10:41 ca.key  <--RSA PRIVATE KEY
		-rw-r--r-- 1 root root    0 Aug 17 10:37 index.txt
		-rw-r--r-- 1 root root    3 Aug 17 10:37 serial
		 
â—¾ 1.4.5 ç”ŸæˆæœåŠ¡å™¨ç«¯è¯ä¹¦å’Œå¯†é’¥key æ–‡ä»¶ 
		./build-key-server server 
			ä¸ä¸Šä¸€æ­¥ç±»ä¼¼ï¼Œå…¶ä¸­"Common Name " é¡¹éœ€è¦å¡«å†™ VPN æœåŠ¡å™¨ FQDN,å…¶ä»–å‡å¯é»˜è®¤ä¸ºdefaultå€¼ã€‚è¿˜ä¼šå‡ºç°ï¼š"Sign the certificate?[y/n]" å’Œ "1 out of 1 certificate requests
			certified,commit?[y/n]",éƒ½è¾“å…¥yç„¶åå›è½¦ï¼Œå…¶å®ƒå¯å‚ç…§å¦‚ä¸‹ã€‚
			ä»¥ä¸‹æ˜¯2.2.2ç‰ˆæœ¬çš„ç»“æœ ï¼š
			æ“ä½œè¿‡ç¨‹ï¼š
			[root@localhost 2.0]# ./build-key-server server
			Generating a 1024 bit RSA private key
			...........++++++
			....................................................................++++++
			writing new private key to 'server.key'
			-----
			You are about to be asked to enter information that will be incorporated
			into your certificate request.
			What you are about to enter is what is called a Distinguished Name or a DN.
			There are quite a few fields but you can leave some blank
			For some fields there will be a default value,
			If you enter '.', the field will be left blank.
			-----
			Country Name (2 letter code) [CN]:
			State or Province Name (full name) [BJ]:
			Locality Name (eg, city) [Beijing]:
			Organization Name (eg, company) [oldboy]:
			Organizational Unit Name (eg, section) [oldboy]:
			Common Name (eg, your name or your server's hostname) [server]:
			Name [oldboy]:
			Email Address [154256500@qq.com]:
			
			Please enter the following 'extra' attributes
			to be sent with your certificate request
			A challenge password []:123456				#å¯†ç 
			An optional company name []:oldboy			#å…¬å¸å
			Using configuration from /root/test/openvpn-2.2.2/easy-rsa/2.0/openssl-1.0.0.cnf
			Check that the request matches the signature
			Signature ok
			The Subject's Distinguished Name is as follows
			countryName           :PRINTABLE:'CN'
			stateOrProvinceName   :PRINTABLE:'BJ'
			localityName          :PRINTABLE:'Beijing'
			organizationName      :PRINTABLE:'oldboy'
			organizationalUnitName:PRINTABLE:'oldboy'
			commonName            :PRINTABLE:'server'
			name                  :PRINTABLE:'oldboy'
			emailAddress          :IA5STRING:'154256500@qq.com'
			Certificate is to be certified until Aug 14 03:21:53 2028 GMT (3650 days)
			Sign the certificate? [y/n]:y
			
			
			1 out of 1 certificate requests certified, commit? [y/n]y
			Write out database with 1 new entries
			Data Base Updated
			
			æç¤ºï¼š
				As in the previous step,most parameters can bedefaulted.When the Common Name is queried,enter "server".Two other
			queries require positive responses,"Sign the certificate? [y/n]" and "1 out of 1 certificate requests certified,commit?[y/n]".
			
			æŸ¥çœ‹åˆ›å»ºçš„æœåŠ¡ç«¯è¯ä¹¦ï¼š


			[root@bogon 2.0]# ll -lrt keys/
			total 40
			-rw-r--r-- 1 root root    3 Aug 17 10:37 serial.old
			-rw-r--r-- 1 root root    0 Aug 17 10:37 index.txt.old
			-rw------- 1 root root  916 Aug 17 10:41 ca.key
			-rw-r--r-- 1 root root 1314 Aug 17 10:41 ca.crt
			-rw------- 1 root root  916 Aug 17 11:21 server.key #æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦
			-rw-r--r-- 1 root root  769 Aug 17 11:21 server.csr #æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦
			-rw-r--r-- 1 root root    3 Aug 17 11:22 serial 	#æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦
			-rw-r--r-- 1 root root   21 Aug 17 11:22 index.txt.attr #æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦
			-rw-r--r-- 1 root root  121 Aug 17 11:22 index.txt  #æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦
			-rw-r--r-- 1 root root 4002 Aug 17 11:22 server.crt #æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦
			-rw-r--r-- 1 root root 4002 Aug 17 11:22 01.pem	    #æœåŠ¡ç«¯ç”Ÿæˆçš„è¯ä¹¦

			ä»¥ä¸‹æ˜¯2.2.2ç‰ˆæœ¬çš„ç»“æœ ï¼š

â—¾ 1.4.6 ç”Ÿæˆå®¢æˆ·ç«¯è¯ä¹¦å’Œkeyæ–‡ä»¶		

		ç”Ÿæˆ client è¯ä¹¦å’Œkey æ–‡ä»¶ã€‚è‹¥å»ºç«‹å¤šä¸ªå®¢æˆ·è¯ä¹¦ï¼Œåˆ™é‡å¤å¦‚ä¸‹æ­¥éª¤å³å¯ã€‚åªéœ€ä¿®æ”¹Common Name é¡¹ oldboy çš„åç§°ã€‚
		åœ¨openvpnä¸­ï¼Œè¿™ç§é…ç½®æ–¹æ³•æ˜¯æ¯ä¸€ä¸ªç™»é™†çš„VPNå®¢æˆ·ç«¯éœ€è¦æœ‰ä¸€ä¸ªè¯ä¹¦ï¼Œæ¯ä¸ªè¯ä¹¦åœ¨åŒä¸€æ—¶åˆ»åªèƒ½ä¾›ä¸€ä¸ªå®¢æˆ·ç«¯è¿æ¥ï¼ˆ
	å¦‚æœæœ‰ä¸¤ä¸ªé›†ç¾¤å®‰è£…ç›¸åŒè¯ä¹¦ï¼ŒåŒæ—¶æ‹¨æœåŠ¡å™¨ï¼Œéƒ½èƒ½æ‹¨ä¸Šï¼Œä½†æ˜¯åªæœ‰ç¬¬ä¸€ä¸ªæ‹¨ä¸Šçš„æ‰èƒ½è¿é€šç½‘ç»œï¼‰ã€‚æ‰€ä»¥ï¼Œå¦‚æœæœ‰å¤šä¸ªäººï¼Œæ¯
	ä¸ªäººéœ€è¦å»ºç«‹ä¸€ ä»½è¯ä¹¦ï¼ˆå»ºç«‹ä¸€ä»½è¯ä¹¦å¤šäººä½¿ç”¨çš„æƒ…å†µåœ¨åæ–‡ä¸­ä¼šè®²åˆ°ï¼‰ã€‚
	
	ä¸‹é¢å»ºç«‹ 2 ä»½å®¢æˆ·ç«¯è¯ä¹¦ï¼Œåç§°åˆ†åˆ«ä¸º client å’Œ ettï¼Œæ“ä½œè¿‡ç¨‹å¦‚ä¸‹ï¼š
	

		[root@bogon 2.0]# ./build-key test   #åœ¨å·¥ä½œå½“ä¸­è¿™ä¸ªå°±æ˜¯æ¯ä¸ªäººçš„åå­—
		Generating a 1024 bit RSA private key
		...............................................................++++++
		...++++++
		writing new private key to 'test.key'
		-----
		You are about to be asked to enter information that will be incorporated
		into your certificate request.
		What you are about to enter is what is called a Distinguished Name or a DN.
		There are quite a few fields but you can leave some blank
		For some fields there will be a default value,
		If you enter '.', the field will be left blank.
		-----
		Country Name (2 letter code) [CN]:ï¼ˆå›è½¦ï¼‰
		State or Province Name (full name) [BJ]:ï¼ˆå›è½¦ï¼‰
		Locality Name (eg, city) [Beijing]:ï¼ˆå›è½¦ï¼‰
		Organization Name (eg, company) [oldboy]:ï¼ˆå›è½¦ï¼‰
		Organizational Unit Name (eg, section) [oldboy]:ï¼ˆå›è½¦ï¼‰
		Common Name (eg, your name or your server's hostname) [test]:ï¼ˆå›è½¦ï¼‰
		Name [oldboy]:ï¼ˆå›è½¦ï¼‰
		Email Address [154256500@qq.com]:ï¼ˆå›è½¦ï¼‰
		
		Please enter the following 'extra' attributes
		to be sent with your certificate request
		A challenge password []:123456			#å¯†ç 
		An optional company name []:oldboy		#å…¬å¸åç§°
		Using configuration from /root/test/openvpn-2.2.2/easy-rsa/2.0/openssl-1.0.0.cnf
		Check that the request matches the signature
		Signature ok
		The Subject's Distinguished Name is as follows
		countryName           :PRINTABLE:'CN'
		stateOrProvinceName   :PRINTABLE:'BJ'
		localityName          :PRINTABLE:'Beijing'
		organizationName      :PRINTABLE:'oldboy'
		organizationalUnitName:PRINTABLE:'oldboy'
		commonName            :PRINTABLE:'test'
		name                  :PRINTABLE:'oldboy'
		emailAddress          :IA5STRING:'154256500@qq.com'
		Certificate is to be certified until Aug 14 04:05:09 2028 GMT (3650 days)
		Sign the certificate? [y/n]:y	#ç¡®è®¤
		
		
		1 out of 1 certificate requests certified, commit? [y/n]y #ç¡®è®¤
		Write out database with 1 new entries
		Data Base Updated
		
		
		[root@bogon 2.0]# ll keys/
		total 64
		-rw-r--r-- 1 root root 4002 Aug 17 11:22 01.pem
		-rw-r--r-- 1 root root 3878 Aug 17 12:05 02.pem
		-rw-r--r-- 1 root root 1314 Aug 17 10:41 ca.crt
		-rw------- 1 root root  916 Aug 17 10:41 ca.key
		-rw-r--r-- 1 root root  240 Aug 17 12:05 index.txt
		-rw-r--r-- 1 root root   21 Aug 17 12:05 index.txt.attr
		-rw-r--r-- 1 root root   21 Aug 17 11:22 index.txt.attr.old
		-rw-r--r-- 1 root root  121 Aug 17 11:22 index.txt.old
		-rw-r--r-- 1 root root    3 Aug 17 12:05 serial
		-rw-r--r-- 1 root root    3 Aug 17 11:22 serial.old
		-rw-r--r-- 1 root root 4002 Aug 17 11:22 server.crt
		-rw-r--r-- 1 root root  769 Aug 17 11:21 server.csr
		-rw------- 1 root root  916 Aug 17 11:21 server.key
		-rw-r--r-- 1 root root 3878 Aug 17 12:05 test.crt	#ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥	
		-rw-r--r-- 1 root root  769 Aug 17 12:05 test.csr	#ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥	
		-rw------- 1 root root  916 Aug 17 12:05 test.key	#ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥		
		
		
		ä¾æ¬¡ç±»æ¨ç”Ÿæˆå…¶ä»–å®¢æˆ·ç«¯è¯ä¹¦./key;ä¸åŒçš„æ˜¯æœ¬ä¾‹ä½¿ç”¨ build-key-pass å‘½ä»¤ build-key çš„åŒºåˆ«è§ä¸‹é¢çš„å®˜æ–¹è¯´æ˜ï¼š
		ï¼ˆIf you would like to password-protect your client keys,substitute the build-key-passcript.ï¼‰
	å¦‚æœä½ éœ€è¦ç”¨å¯†ç ä¿æŠ¤ä½ çš„å®¢æˆ·ç«¯ä½ å¯ä»¥ç”¨ build-key-passscript.æ›¿ä»£ã€‚
				
		
		[root@bogon 2.0]# ./build-key-pass ett
		Generating a 1024 bit RSA private key
		.++++++
		...............++++++
		writing new private key to 'ett.key'		
		Enter PEM pass phrase:					#æ‹¨å·å¯†ç ï¼Œè¿™ä¸ªæ˜¯çœ‹ä¸è§çš„
		Verifying - Enter PEM pass phrase:		#é‡å¤æ‹¨å·å¯†ç 
		-----
		You are about to be asked to enter information that will be incorporated
		into your certificate request.
		What you are about to enter is what is called a Distinguished Name or a DN.
		There are quite a few fields but you can leave some blank
		For some fields there will be a default value,
		If you enter '.', the field will be left blank.
		-----
		Country Name (2 letter code) [CN]:
		State or Province Name (full name) [BJ]:
		Locality Name (eg, city) [Beijing]:
		Organization Name (eg, company) [oldboy]:
		Organizational Unit Name (eg, section) [oldboy]:
		Common Name (eg, your name or your server's hostname) [ett]:
		Name [oldboy]:
		Email Address [154256500@qq.com]:
		
		Please enter the following 'extra' attributes
		to be sent with your certificate request
		A challenge password []:123456		#è¿™ä¸ªåœ¨å‘é€è¯ä¹¦è¯·æ±‚æ—¶ä¼šé¢å¤–éœ€è¦
		An optional company name []:oldboy
		Using configuration from /root/test/openvpn-2.2.2/easy-rsa/2.0/openssl-1.0.0.cnf
		Check that the request matches the signature
		Signature ok
		The Subject's Distinguished Name is as follows
		countryName           :PRINTABLE:'CN'
		stateOrProvinceName   :PRINTABLE:'BJ'
		localityName          :PRINTABLE:'Beijing'
		organizationName      :PRINTABLE:'oldboy'
		organizationalUnitName:PRINTABLE:'oldboy'
		commonName            :PRINTABLE:'ett'
		name                  :PRINTABLE:'oldboy'
		emailAddress          :IA5STRING:'154256500@qq.com'
		Certificate is to be certified until Aug 14 04:21:22 2028 GMT (3650 days)
		Sign the certificate? [y/n]:y
		
		
		1 out of 1 certificate requests certified, commit? [y/n]y
		Write out database with 1 new entries
		Data Base Updated		
			
		[root@bogon 2.0]# ll keys/
		total 80
		-rw-r--r-- 1 root root 4002 Aug 17 11:22 01.pem
		-rw-r--r-- 1 root root 3878 Aug 17 12:05 02.pem
		-rw-r--r-- 1 root root 3877 Aug 17 12:21 03.pem
		-rw-r--r-- 1 root root 1314 Aug 17 10:41 ca.crt
		-rw------- 1 root root  916 Aug 17 10:41 ca.key
		-rw-r--r-- 1 root root 3877 Aug 17 12:21 ett.crt	#ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥	
		-rw-r--r-- 1 root root  765 Aug 17 12:21 ett.csr	#ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥	
		-rw------- 1 root root 1041 Aug 17 12:21 ett.key	#ç”Ÿæˆçš„å®¢æˆ·ç«¯è¯ä¹¦å’Œå¯†é’¥	
		-rw-r--r-- 1 root root  358 Aug 17 12:21 index.txt
		-rw-r--r-- 1 root root   21 Aug 17 12:21 index.txt.attr
		-rw-r--r-- 1 root root   21 Aug 17 12:05 index.txt.attr.old
		-rw-r--r-- 1 root root  240 Aug 17 12:05 index.txt.old
		-rw-r--r-- 1 root root    3 Aug 17 12:21 serial
		-rw-r--r-- 1 root root    3 Aug 17 12:05 serial.old
		-rw-r--r-- 1 root root 4002 Aug 17 11:22 server.crt
		-rw-r--r-- 1 root root  769 Aug 17 11:21 server.csr
		-rw------- 1 root root  916 Aug 17 11:21 server.key
		-rw-r--r-- 1 root root 3878 Aug 17 12:05 test.crt
		-rw-r--r-- 1 root root  769 Aug 17 12:05 test.csr
		-rw------- 1 root root  916 Aug 17 12:05 test.key
		
		#å¦‚æœå…¬å¸æœ‰100äººå°±éœ€è¦è¿™æ ·æ‰§è¡Œ100æ¬¡ï¼Œä½†ä¹Ÿå¯ä»¥å†™è„šæœ¬	
		
â—¾ 1.4.7	ç”Ÿæˆ generate diffie hellman parameters
		æç¤ºï¼šDiffie Hellman parameters must be generated for the OpenVPN server.
		ç”Ÿæˆä¼ è¾“è¿›è¡Œå¯†é’¥äº¤æ¢æ—¶ç”¨åˆ°çš„äº¤æ¢å¯†é’¥åè®®æ–‡ä»¶
		
		./build-dh <--(ä¸èƒ½è½äº†ä¸æ‰§è¡Œå•Šï¼Œå¦åˆ™å‡ºé”™)
		
		ä»¥ä¸‹æ˜¯2.2.2ç‰ˆæœ¬çš„ç»“æœ ï¼š
		æ“ä½œè¿‡ç¨‹ï¼š
		[root@bogon 2.0]# ./build-dh
		Generating DH parameters, 1024 bit long safe prime, generator 2
		This is going to take a long time
		.................................+...........+.......................................................................................................+.................................................+...............+.........+...........................................................................+.......................................+.........+.................................................................+........................................+....................................................+....+....................................................................................................................................+..........................................................+..+..................+...............+..........................................+............................................+..................................+..............+................................................+...............................................+........+.......................................................+.......+.......+........................+..............+..+..............+........................+.....................................................+.................................................................+....+...+.............................................................................................+...............+...................+...+.......+..............................+...................................................................................+...........................................................................+.........................................................................................+.......+.........................+.........+......+..........+...............................+...........+............................................+.................+..........................................+............................+..........................................................+.........++*++*++*
		[root@bogon 2.0]# ll keys/dh1024.pem 		#è¿™ä¸ªæ­¥éª¤ç”Ÿæˆçš„æ˜¯ dh1024.pem  æ–‡ä»¶
		-rw-r--r-- 1 root root 245 Aug 17 12:34 keys/dh1024.pem
		
â—¾ 1.4.8	æŸ¥çœ‹ç”ŸæˆæœåŠ¡å™¨åŠå®¢æˆ·å•çš„è¯ä¹¦æ–‡ä»¶
		ä»¥ä¸‹æ˜¯2.2.2ç‰ˆæœ¬çš„ç»“æœ ï¼š
		ç”Ÿæˆçš„è¯ä¹¦ç›®å½•åŠæ–‡ä»¶å¦‚ä¸‹ï¼š
		[root@localhost 2.0]# pwd  
		/root/tools/openvpn/openvpn-2.2.2/easy-rsa/2.0  <--è¿™æ­¥æ²¡ç»“æœæ˜¯ä¸å¯¹çš„ã€‚
		[root@bogon 2.0]# ll keys/
		total 84
		-rw-r--r-- 1 root root 4002 Aug 17 11:22 01.pem
		-rw-r--r-- 1 root root 3878 Aug 17 12:05 02.pem
		-rw-r--r-- 1 root root 3877 Aug 17 12:21 03.pem
		-rw-r--r-- 1 root root 1314 Aug 17 10:41 ca.crt
		-rw------- 1 root root  916 Aug 17 10:41 ca.key
		-rw-r--r-- 1 root root  245 Aug 17 12:34 dh1024.pem
		-rw-r--r-- 1 root root 3877 Aug 17 12:21 ett.crt
		-rw-r--r-- 1 root root  765 Aug 17 12:21 ett.csr
		-rw------- 1 root root 1041 Aug 17 12:21 ett.key
		-rw-r--r-- 1 root root  358 Aug 17 12:21 index.txt
		-rw-r--r-- 1 root root   21 Aug 17 12:21 index.txt.attr
		-rw-r--r-- 1 root root   21 Aug 17 12:05 index.txt.attr.old
		-rw-r--r-- 1 root root  240 Aug 17 12:05 index.txt.old
		-rw-r--r-- 1 root root    3 Aug 17 12:21 serial
		-rw-r--r-- 1 root root    3 Aug 17 12:05 serial.old
		-rw-r--r-- 1 root root 4002 Aug 17 11:22 server.crt
		-rw-r--r-- 1 root root  769 Aug 17 11:21 server.csr
		-rw------- 1 root root  916 Aug 17 11:21 server.key
		-rw-r--r-- 1 root root 3878 Aug 17 12:05 test.crt
		-rw-r--r-- 1 root root  769 Aug 17 12:05 test.csr
		-rw------- 1 root root  916 Aug 17 12:05 test.key

â—¾ 1.4.9	è¯¦è§£æœåŠ¡å™¨åŠå®¢æˆ·ç«¯çš„è¯ä¹¦å„æ–‡ä»¶ç”¨é€”
		

			â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
			â”‚	Filename 		  â”‚			Needed By		  â”‚		  Purpose		 	  â”‚  Secret	 â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			| 	ca.crt			  |	server + all clients	  |	Root CA certificate  	  |    NO	 | #caè¯ä¹¦æœåŠ¡ç«¯å’Œæ‰€æœ‰çš„å®¢æˆ·ç«¯éƒ½éœ€è¦
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			| 	ca.key 			  |	key signing machine only  |	Root CA key 		 	  |    YES   | #æœåŠ¡ç«¯éœ€è¦çš„
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			| 	dh{n}.pem 		  |	server only	  			  |	Diffie Hellman parameters |    YES   |  #åè®®æ–‡ä»¶ï¼ŒåŠ å¯†ç®—æ³•
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			|	server.crt 		  | server.only		  		  |	Server Certificate 		  |    NO    | #æœåŠ¡ç«¯çš„è¯ä¹¦å’Œkey 
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			|	server.key 		  | server.only		  		  |	Server Key	  			  |    YES   | #æœåŠ¡ç«¯çš„è¯ä¹¦å’Œkey 
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			|	test.crt 	  	  | client1 only	  		  |	Client1 Certificate 	  |    NO    | #å®¢æˆ·ç«¯è¯ä¹¦
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			|	test.key 	  	  | client1 only	  		  |	Client1 Key		  	  	  |    YES   | #å®¢æˆ·ç«¯key
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			|	ett.crt 	  	  | ett only	  		 	  |	ett Certificate	  	  	  |    NO    | #å®¢æˆ·ç«¯è¯ä¹¦
			â”œ---------------------â”¼---------------------------â”¼---------------------------â”¼----------â”¤
			|	ett.key 	  	  | ett only	  		  	  |	ett Key		  	  	  	  |    YES   | #å®¢æˆ·ç«¯key
			â””---------------------â”´---------------------------â”´---------------------------â”´----------â”˜ 
		
		ä¸ºé˜²æ­¢æ¶æ„æ”»å‡»ï¼ˆå¦‚DOSã€UDP port floodingï¼‰ï¼Œæˆ‘ä»¬ç”Ÿæˆ"HMAC firewall"ï¼ˆä½†æ˜¯æ•ˆæœä¸å¤ªå¥½è¯´ï¼‰
			[root@localhost 2.0]# openvpn --genkey --secret keys/ta.key
			[root@localhost 2.0]# ls -l keys/ta.key
			-rw------- 1 root root 636 Aug 17 13:58 keys/ta.key
			æç¤ºï¼š2048 bit OpenVPN static key 
			
			ç”Ÿæˆè¯ä¹¦åŠé”€æ–‡ä»¶ï¼Œé˜²æ­¢æ—¥åæœ‰äººä¸¢å¤±è¯ä¹¦ï¼Œè¢«éæ³•ç”¨æˆ·æ¥å…¥VPN
			#./make-orl vpnorl.pem(æš‚æ— )
			å¤§éƒ¨åˆ†æœåŠ¡ç«¯å·¥ä½œå·²å®Œæˆï¼Œæ¥ä¸‹æ¥çš„æ“ä½œå°±æ˜¯æŠŠè¯ä¹¦æ‹·è´åˆ°æŒ‡å®šåœ°ç‚¹äº†ã€‚
			
â—¾ 1.4.10  è¯¦è§£æœåŠ¡å™¨ç«¯ VPN é‡è¦çš„å‘½ä»¤	
			vars è„šæœ¬æ˜¯ç”¨æ¥åˆ›å»ºç¯å¢ƒå˜é‡ï¼Œè®¾ç½®æ‰€éœ€è¦çš„å˜é‡çš„è„šæœ¬
			clean-all è„šæœ¬æ˜¯åˆ›å»ºç”Ÿæˆ ca è¯ä¹¦åŠå¯†é’¥æ–‡ä»¶æ‰€éœ€è¦çš„æ–‡ä»¶åŠç›®å½•
			build-ca  è„šæœ¬ç”Ÿæˆcaè¯ä¹¦ï¼ˆäº¤äº’ï¼‰
			build-dh  è„šæœ¬ç”ŸæˆDiffie-Hellman æ–‡ä»¶ï¼ˆäº¤äº’ï¼‰
			build-key-server è„šæœ¬ç”ŸæˆæœåŠ¡å™¨ç«¯å¯†é’¥ï¼ˆäº¤äº’ï¼‰
			build-key è„šæœ¬ç”Ÿæˆå®¢æˆ·ç«¯å¯†é’¥ï¼ˆäº¤äº’ï¼‰
			build-key-pass è„šæœ¬ç”Ÿæˆå®¢æˆ·ç«¯å¸¦å¯†ç çš„å¯†é’¥ï¼ˆäº¤äº’ï¼‰
			build-dh è„šæœ¬ç”ŸæˆDiffie-Hellman æ–‡ä»¶ï¼ˆäº¤äº’ï¼‰
			pkitool è„šæœ¬ç›´æ¥ä½¿ç”¨ vars çš„ç¯å¢ƒå˜é‡è®¾ç½®ï¼Œç›´æ¥ç”Ÿæˆè¯ä¹¦ï¼ˆéäº¤äº’ï¼‰
			[root@localhost 2.0]# ll
			total 136
			-rwxrwxr-x 1  500  500   119 Nov 25  2011 build-ca
			-rwxrwxr-x 1  500  500   352 Nov 25  2011 build-dh
			-rwxrwxr-x 1  500  500   188 Nov 25  2011 build-inter
			-rwxrwxr-x 1  500  500   163 Nov 25  2011 build-key
			-rwxrwxr-x 1  500  500   157 Nov 25  2011 build-key-pass
			-rwxrwxr-x 1  500  500   249 Nov 25  2011 build-key-pkcs12
			-rwxrwxr-x 1  500  500   268 Nov 25  2011 build-key-server
			-rwxrwxr-x 1  500  500   213 Nov 25  2011 build-req
			-rwxrwxr-x 1  500  500   158 Nov 25  2011 build-req-pass
			-rwxrwxr-x 1  500  500   428 Nov 25  2011 clean-all
			-rwxrwxr-x 1  500  500  1457 Nov 25  2011 inherit-inter
			drwx------ 2 root root  4096 Aug 17 13:58 keys
			-rwxrwxr-x 1  500  500   295 Nov 25  2011 list-crl
			-rw-rw-r-- 1  500  500   413 Nov 25  2011 Makefile
			-rwxrwxr-x 1  500  500  7768 Oct 21  2010 openssl-0.9.6.cnf
			-rwxrwxr-x 1  500  500  8325 Nov 25  2011 openssl-0.9.8.cnf
			-rwxrwxr-x 1  500  500  8222 Nov 25  2011 openssl-1.0.0.cnf
			-rwxrwxr-x 1  500  500 12675 Nov 25  2011 pkitool
			-rw-rw-r-- 1  500  500  9299 Nov 25  2011 README
			-rwxrwxr-x 1  500  500   918 Nov 25  2011 revoke-full
			-rwxrwxr-x 1  500  500   178 Nov 25  2011 sign-req
			-rwxrwxr-x 1  500  500  1828 Aug 17 10:07 vars
			-rwxr-xr-x 1 root root  1841 Aug 17 09:34 vars.roye.20180817
			-rwxrwxr-x 1  500  500   714 Nov 25  2011 whichopensslcnf

â—¾ 1.4.10  è¯¦è§£æœåŠ¡å™¨ç«¯ VPN server.conf é‡è¦å‚æ•°
			1ï¼‰æ‹·è´ keys åŠé…ç½® 
			æŠŠæ‰€æœ‰çš„keys å’Œé…ç½®æ‹·è´åˆ°/etc/openvpn ç›®å½•ä¸‹ï¼š
			æ“ä½œå‘½ä»¤ï¼š
			mkdir -p /etc/openvpn 
			cd /root/tools/openvpn 
			cd openvpn-2.2.2/easy-rsa/2.0
			cp -ap keys /etc/openvpn/
			cd /root/tools/openvpn/openvpn-2.2.2/sample-config-files/
			cp client.conf server.conf  /etc/openvpn/
			tree /etc/openvpn/
			
			æ“ä½œè¿‡ç¨‹ï¼š
			[root@localhost 2.0]# mkdir -p /etc/openvpn #<--é»˜è®¤ä¸å­˜åœ¨æ­¤ç›®å½•ï¼ˆæ­¤ç›®å½•æ˜¯å°†æ¥å­˜æ”¾é…ç½®æ–‡ä»¶å’Œè¯ä¹¦çš„åœ°æ–¹ï¼‰
			[root@localhost 2.0]# cd /root/tools/openvpn/
			[root@localhost 2.0]# cd openvpn-2.2.2/easy-rsa/2.0/  #è®°ä¸‹å½“å‰çš„è·¯å¾„
			[root@localhost 2.0]# cp -ap keys /etc/openvpn/
			[root@localhost 2.0]# cd /root/tools/openvpn/openvpn-2.2.2/sample-config-files/
			[root@localhost sample-config-files]# cp client.conf server.conf  /etc/openvpn/
			[root@bogon sample-config-files]# tree /etc/openvpn/
			/etc/openvpn/
			â”œâ”€â”€ client.conf
			â”œâ”€â”€ keys
			â”‚Â Â  â”œâ”€â”€ 01.pem
			â”‚Â Â  â”œâ”€â”€ 02.pem
			â”‚Â Â  â”œâ”€â”€ 03.pem
			â”‚Â Â  â”œâ”€â”€ ca.crt
			â”‚Â Â  â”œâ”€â”€ ca.key
			â”‚Â Â  â”œâ”€â”€ dh1024.pem
			â”‚Â Â  â”œâ”€â”€ ett.crt
			â”‚Â Â  â”œâ”€â”€ ett.csr
			â”‚Â Â  â”œâ”€â”€ ett.key
			â”‚Â Â  â”œâ”€â”€ index.txt
			â”‚Â Â  â”œâ”€â”€ index.txt.attr
			â”‚Â Â  â”œâ”€â”€ index.txt.attr.old
			â”‚Â Â  â”œâ”€â”€ index.txt.old
			â”‚Â Â  â”œâ”€â”€ serial
			â”‚Â Â  â”œâ”€â”€ serial.old
			â”‚Â Â  â”œâ”€â”€ server.crt
			â”‚Â Â  â”œâ”€â”€ server.csr
			â”‚Â Â  â”œâ”€â”€ server.key
			â”‚Â Â  â”œâ”€â”€ ta.key
			â”‚Â Â  â”œâ”€â”€ test.crt
			â”‚Â Â  â”œâ”€â”€ test.csr
			â”‚Â Â  â””â”€â”€ test.key
			â””â”€â”€ server.conf
			
			1 directory, 24 files
			
			[root@localhost sample-config-files]# cd /etc/openvpn/
			
			2ï¼‰server.conf æ ·ä¾‹é»˜è®¤å¼€å¯çš„é…ç½®å¦‚ä¸‹ï¼š
			æ“ä½œå‘½ä»¤ï¼š 
			[root@bogon openvpn]# cp server.conf server.conf.ori #å¤‡ä»½åŸå§‹æ–‡ä»¶
			[root@bogon openvpn]#    #è¿‡æ»¤ æ‰ ;å’Œ#è¿˜æœ‰ ^$ç©ºæ ¼ åœ¨server.confæ–‡ä»¶ä¸­
			port 1194
			proto udp
			dev tun
			ca ca.crt
			cert server.crt
			dh dh1024.pem
			server 10.8.0.0 255.255.255.0
			ifconfig-pool-persist ipp.txt
			keepalive 10 120
			comp-lzo
			persist-key
			persist-tun
			status openvpn-status.log
			verb 3
			
			æç¤º ï¼šopenvpn-2.2.2çš„ç‰ˆæœ¬å’Œ2.0.9çš„server.conf å‡ ä¹ä¸€æ ·
			æ³¨æ„ ï¼š
			aã€ç”Ÿäº§ç¯å¢ƒé…ç½® server.conf é…ç½®è§æœ¬æ–‡æ¡£ä¸‹é¢çš„confç›®å½•å•ç‹¬é…ç½®æ–‡ä»¶ï¼Œæˆ–çœ‹ä¸‹æ–‡
			bã€é‡è§†é»˜è®¤çš„æ ·ä¾‹å…¶ä»–é…ç½®å‚æ•°ã€‚
			3ï¼‰ä¼ä¸šç”Ÿäº§ç¯å¢ƒserver.conf é…ç½®æ¡ˆä¾‹ï¼š
			â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
			â”‚		é…ç½®å‚æ•°	  			â”‚			 	å‚æ•°è¯´æ˜							 	  		   â”‚
			â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€-â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
			| local 124.43.12.115  			| å“ªä¸€ä¸ªæœ¬åœ°åœ°å€è¦è¢« OpenVPN è¿›è¡Œç›‘å¬ï¼ˆWhich local IP address	   |#æ˜¯VPNå¯åŠ¨æ—¶ç›‘å¬çš„IPåœ°å€ï¼Œè¿™åœ°æ–¹è¦é…çš„æ˜¯æœåŠ¡å™¨ç«¯çš„å¤–ç½‘åœ°å€
			|					  			| should OpenVPNï¼‰ 	| 10.0.0.28ï¼š1194						   	   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| port 52115 		  			| ç›‘å¬çš„ç«¯å£ï¼Œé»˜è®¤æ˜¯1194ï¼Œè¿™é‡Œä¸ºäº†å®‰å…¨èµ·è§ï¼Œä¿®æ”¹ä¸º52115		   	   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| proto udp	ï¼ˆé»˜è®¤æ˜¯udpåè®®ï¼‰	| æŒ‡å®šç›‘å¬çš„åè®®ï¼Œå½“å¹¶å‘è®¿é—®å¤šæ—¶ï¼Œæ¨è tcp   					   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| dev tun  	ï¼ˆé€‰tunå³å¯ï¼‰	 	| vpn server çš„æ¨¡å¼é‡‡ç”¨è·¯ç”±æ¨¡å¼ã€‚å¯é€‰tapæˆ–tun					   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| ca ca.crt			  			| ca è¯ä¹¦ï¼Œæ³¨æ„æ­¤æ–‡ä»¶å’Œ server.conf åœ¨ç›®å½•ä¸‹ï¼Œå¦åˆ™è¦ç”¨ç»å¯¹è·¯å¾„è°ƒç”¨ | #æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½éœ€è¦
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| cert server.crt 	  			| æœåŠ¡ç«¯çš„è¯ä¹¦å’Œæ–‡ä»¶    										   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| key server.key 	  			| This file should be kept secret 	 						   	   | #æœåŠ¡ç«¯çš„è¯ä¹¦å’Œæ–‡ä»¶
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| dh dh1024.pem	  	  			| å¯†é’¥äº¤æ¢æ–‡ä»¶    												   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| server 10.8.0.0 255.255.255.0	| è¿™ä¸ªæ˜¯VPN SERVER åŠ¨æ€åˆ†é…ç»™ VPN CLIENT çš„åœ°å€æ± ï¼Œä¸€èˆ¬ä¸éœ€è¦æ›´æ”¹  | #æ˜¯å®¢æˆ·ç«¯æ‹¨å·ä¹‹åï¼ŒæœåŠ¡å™¨ç«¯æŒ‰ç…§è¿™ä¸ªåœ°å€æ± ç»™å®¢æˆ·ç«¯åˆ†é…åœ°å€
			|								| è¿™ä¸ªæ®µä¸è¦å’Œä»»ä½•ç½‘ç»œåœ°å€æ®µå†²çªæˆ–é‡å¤							   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| ifconfig-pool-persist ipp.txt |   															   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| push "route 10.0.0.0			|  è¿™æ˜¯ VPN SERVER æ‰€åœ¨çš„å†…ç½‘ç½‘æ®µï¼Œå¦‚æœæœ‰å¤šä¸ªå¯ä»¥å†™å¤šä¸ªpush,æ³¨æ„ï¼Œ | #åœ¨VPNçš„å®¢æˆ·ç«¯ä¸Šé¢é…ä¸€ä¸ªè·¯ç”± push è¡¨ç¤ºæ¨åˆ°å®¢æˆ·ç«¯
			|    255.255.255.0"				|  æ­¤å‘½ä»¤å®é™…ä½œç”¨æ˜¯åœ¨ vpn å®¢æˆ·ç«¯æœ¬åœ°ç”Ÿæˆ VPN SERVER æ‰€åœ¨çš„å†…ç½‘ç½‘æ®µ | #ä»å®é™…çš„é…ç½®ä¸Šé¢è¿™ä¸ªrouteè·¯ç”±å°±æ˜¯ä½ vpn server æ‰€åœ¨å†…ç½‘çš„ç½‘æ®µ
			|								|  è·¯ç”±ï¼Œç¡®ä¿èƒ½å¤Ÿå’Œ VPN 										   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| 								|  VPN SERVER æ‰€åœ¨çš„å†…ç½‘ç½‘æ®µè·¯ç”±ï¼Œç¡®ä¿èƒ½å¤Ÿå’Œ VPN SERVER æ‰€åœ¨çš„å†…ç½‘ |
			|								|  ç½‘æ®µé€šä¿¡ã€‚è·¯ç”±æ¡ç›®ç±»ä¼¼ï¼š10.0.0.0 255.255.255.0 10.8.0.9 	       |
			|								|  10.8.0.10	1 												   |
			|								|	ç»éªŒï¼šå¦‚æœæƒ³çŸ¥é“VPN åˆ°åº•åœ¨æœ¬åœ°åŠ äº†é‚£äº›è·¯ç”±ï¼Œå¯ä»¥åœ¨æ‹¨å·å‰ç¬”è®°æœ¬ |
			|								|	ä¸Šå‘½ä»¤è¡Œæ‰§è¡Œ route print è®°å½•ä¸‹æ‰€æœ‰è·¯ç”±æ¡ç›®ï¼Œç„¶ååœ¨æ‹¨å·åè®°å½•ä¸‹|
			|								|  æ‰€æœ‰è·¯ç”±æ¡ç›®ï¼Œç„¶åï¼Œç”¨æ¯”è¾ƒè½¯ä»¶æ¯”è¾ƒä¸‹å³å¯çŸ¥é“å˜é‡åœ¨å“ªé‡Œäº†		   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| client-to-client 			    |  å…è®¸æ‹¨å·çš„å¤šä¸ª VPN client äº’ç›¸é€šä¿¡ 							   | #å¤šä¸ªå®¢æˆ·ç«¯æ‹¨åˆ°åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šå®ƒä»¬ä¹‹é—´æ˜¯å¦å…è®¸é€šä¿¡
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| duplicate-cn 				    |  å…è®¸å¤šä¸ªå®¢æˆ·ç«¯ä½¿ç”¨åŒä¸€ä¸ªè´¦æˆ·è¿æ¥								   | #å…è®¸å¤šä¸ªå®¢æˆ·ç«¯ä½¿ç”¨ä¸€ä¸ªè¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| keepalive 10 120 				|  æ¯10ç§’ping ä¸€æ¬¡ï¼Œè‹¥æ˜¯120ç§’æœªæ”¶åˆ°åŒ…ï¼Œå³è®¤å®šå®¢æˆ·ç«¯æ–­çº¿			   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| comp-lzo 					    |  å¼€å¯å‹ç¼©åŠŸèƒ½													   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| persist-key				    |  å½“vpnè¶…æ—¶åï¼Œå½“é‡æ–°å¯åŠ¨vpnåï¼Œä¿æŒä¸Šä¸€æ¬¡ä½¿ç”¨çš„ç§é’¥ï¼Œè€Œä¸é‡æ–°è¯»å–|
			|								|  ç§é’¥ã€‚														   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| persist-tun				    |  é€šè¿‡ keepalive æ£€æµ‹ vpn è¶…æ—¶åï¼Œå½“é‡æ–°å¯åŠ¨ vpn åï¼Œä¿æŒtun æˆ–è€… |
			|								|  tap è®¾å¤‡è‡ªåŠ¨è¿æ¥çŠ¶æ€											   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| status openvpn-status.log 	|  openvpn æ—¥å¿—çŠ¶æ€ä¿¡æ¯								   			   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| log /var/log/openvpn.log 	 	|  æ—¥å¿—æ–‡ä»¶							   			   				   |
			â”œ-------------------------------â”¼------------------------------------------------------------------â”¤
			| verb 3					 	|  æŒ‡å®šæ—¥å¿—æ–‡ä»¶å†—ä½™									   			   |
			â”œ-------------------------------â”´------------------------------------------------------------------â”¤
			| æç¤ºï¼šå…ˆæ‰§è¡Œexport LANG="ZH_GB18030"ï¼Œç„¶åç¼–è¾‘é…ç½®æ–‡ä»¶ server.confï¼Œæƒ…ç©ºæ‰€æœ‰å†…å®¹ï¼ŒæŠŠä¸Šé¢å†…å®¹è€ƒåˆ° |
			| è¿›æ¥ã€‚ç„¶åï¼Œæ‰§è¡Œ dos2unix server.conf æœ¬æ–‡æ¡£ç›®å½•ä¸‹ï¼Œæœ‰å‚è€ƒé…ç½®æ–‡ä»¶ server.conf	  			   |
			â””--------------------------------------------------------------------------------------------------â”˜ 
			
â—¾ 1.4.11  å®é™…æœåŠ¡å™¨ç«¯ VPN é…ç½®æ–‡ä»¶ server.conf é…ç½® 
		å’Œé»˜è®¤æ ·ä¾‹é…ç½®ç›¸æ¯”ï¼Œä¼ä¸šç”Ÿäº§ç¯å¢ƒçš„é…ç½®æ”¹åŠ¨å¦‚ä¸‹ï¼š
		
		local 124.43.12.115
		port 52115
		push "route 10.0.0.0 255.255.255.0"
		client-to-client 
		duplicate-cn 
		log /var/log/openvpn.log
		
		
		æœ€åæŸ¥çœ‹æœåŠ¡å™¨ä¸Šçš„ server.conf
		[root@loclahost ~]# pwd 
		/etc/openvpn
		[root@bogon openvpn]# cat server.conf
		local 10.0.0.28
		port 52115
		proto tcp #æ¨è tcp 
		dev tun
		ca /etc/openvpn/keys/ca.crt			#caè¯ä¹¦è·¯å¾„
		cert /etc/openvpn/keys/server.crt
		key /etc/openvpn/keys/server.key
		dh /etc/openvpn/keys/dh1024.pem
		server 10.8.0.0 255.255.255.0
		ifconfig-pool-persist ipp.txt
		keepalive 10 120
		comp-lzo
		persist-key
		persist-tun
		status openvpn-status.log
		verb 3
		push "route 192.168.1.24  255.255.255.0"  #push  192.168.1.24 ipåˆ°å®¢æˆ·ç«¯
		client-to-client
		duplicate-cn
		log /var/log/openvpn.log
		
â—¾ 1.4.12 è°ƒè¯•æœåŠ¡å™¨ç«¯ VPN æœåŠ¡å¯åŠ¨ç¯å¢ƒ
		a)å–æ¶ˆæœåŠ¡å™¨ä¸Šé˜²ç«å¢™iptables å¯¹ Openvpn (é»˜è®¤ 1194,æœ¬ä¾‹ 52115)çš„æ‹¦è½½ã€‚ä»¥åŠå…è®¸æœåŠ¡è¿›è¡Œè½¬å‘ã€‚
		b)selinux
		c)å¼€å¯å†…æ ¸è½¬å‘åŠŸèƒ½ï¼š
		[root@bogon openvpn]# sed -i 's#net.ipv4.ip_forward=0#net.ipv4.ip_forward=1#' /etc/sysctl.conf
		[root@bogon openvpn]# grep ip_forward /etc/sysctl.conf 
		net.ipv4.ip_forward=1
		[root@bogon openvpn]# sysctl -p
		
		
		[root@bogon openvpn]# firewall-cmd --permanent --zone=public --add-port=52115/tcp #é˜²ç«å¢™å¼€å¯52115ç«¯å£
		success

â—¾ 1.4.13 å¯åŠ¨æœåŠ¡ç«¯çš„VPN æœåŠ¡å¹¶æ£€æŸ¥
		c) å¯åŠ¨ VPN æœåŠ¡
		[root@bogon ~]# /usr/local/sbin/openvpn  --config /etc/openvpn/server.conf &   #<--(&è¡¨ç¤ºåå°æ‰§è¡Œ)
		[1] 21508	<--çœ‹åˆ°è¿™ä¸ªè¡¨ç¤ºå¯åŠ¨æˆåŠŸ
		
		[root@bogon ~]# netstat -lntup|grep vpn			#æ£€æŸ¥å¯åŠ¨æ˜¯å¦çœŸçš„æˆåŠŸ
		tcp        0      0 10.0.0.28:52115         0.0.0.0:*               LISTEN      21508/openvpn			
		
		è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
		[root@bogon ~]# echo '#startup openvpn service by oldboy' >> /etc/rc.local 
		[root@bogon ~]# echo '/usr/local/sbin/openvpn --config /etc/openvpn/server.conf &' >> /etc/rc.local
		[root@bogon ~]# tail -2 /etc/rc.local
		#startup openvpn service by roye 
		/usr/local/sbin/openvpn --config /etc/openvpn/server.conf &
		
		#<--vpn å¯åŠ¨è„šæœ¬ä¸­çš„å¯åŠ¨ vpn æ–¹æ³•ï¼›
		/usr/local/sbin/openvpn --daemon --writepid /var/run/openvpn/server.pid --config server.conf --cd /etc/openvpn
		
		æŸ¥çœ‹æ—¥å¿—ï¼š		2.2.2
		[root@bogon ~]# tail /var/log/openvpn.log 
		Sat Aug 18 15:56:15 2018 Data Channel MTU parms [ L:1544 D:1450 EF:44 EB:135 ET:0 EL:0 AF:3/1 ]
		Sat Aug 18 15:56:15 2018 Listening for incoming TCP connection on 10.0.0.28:52115
		Sat Aug 18 15:56:15 2018 TCPv4_SERVER link local (bound): 10.0.0.28:52115
		Sat Aug 18 15:56:15 2018 TCPv4_SERVER link remote: [undef]
		Sat Aug 18 15:56:15 2018 MULTI: multi_init called, r=256 v=256
		Sat Aug 18 15:56:15 2018 IFCONFIG POOL: base=10.8.0.4 size=62
		Sat Aug 18 15:56:15 2018 IFCONFIG POOL LIST
		Sat Aug 18 15:56:15 2018 MULTI: TCP INIT maxclients=1024 maxevents=1028
		Sat Aug 18 15:56:15 2018 Initialization Sequence Completed
		Sat Aug 18 15:56:15 2018 IPv6 in tun mode is not supported in OpenVPN 2.2					
		
		vpn å¯åŠ¨ä¹‹åç”Ÿæˆçš„ç½‘å¡ 
		
		ifconfig å°±å¯ä»¥çœ‹åˆ°è¯¥ç½‘å¡
		
		tun0: flags=4305<UP,POINTOPOINT,RUNNING,NOARP,MULTICAST>  mtu 1500
        inet 10.8.0.1  netmask 255.255.255.255  destination 10.8.0.2
        inet6 fe80::1af5:d335:2c62:5155  prefixlen 64  scopeid 0x20<link>
        unspec 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  txqueuelen 100  (UNSPEC)
        RX packets 0  bytes 0 (0.0 B)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 3  bytes 144 (144.0 B)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0
		
		
		
		
		æŠŠå®¢æˆ·ç«¯è¯ä¹¦åŠCAè¯ä¹¦å®‰å…¨çš„ä¸‹è½½åˆ°æœ¬åœ°
		[root@bogon ~]# sz oldboy.*.ca.* ctiantian. *-y
		ç‰¹åˆ«æç¤ºï¼šthe sample configuration files are named server.conf and client.conf On Windows they are named 
		server.ovpn and client.ovpn
					
					
â—¾ 1.4.14 æœåŠ¡ç«¯ openvpn å¸¸è§å¯åŠ¨æ•…éšœä¸æ’é”™
		è§ç»“å°¾
					
					
â—¾ 1.4.15 é…ç½®å¸¸è§„æ–¹å¼å¯åŠ¨ openvpn æœåŠ¡				
		è¯´æ˜ï¼šå¦‚æœå‰é¢æŠŠå¯åŠ¨æœåŠ¡åŠ åˆ°äº† /etc/rc.local ,åˆ™æ­¤æ­¥å¿½ç•¥
		[root@bogon ~]# cp /root/test/openvpn-2.2.2/sample-scripts/openvpn.init /etc/init.d/openvpn #æŠŠ openvpn.init å¤åˆ¶åˆ° /etc/init.d/ ç›®å½•ä¸‹å¹¶æ”¹åä¸º openvpn
		[root@bogon ~]# chmod 700 /etc/init.d/openvpn 		#ç»™openvpnè®¾ç½®æƒé™
		[root@bogon ~]# cd /etc/init.d/
		[root@bogon init.d]# chkconfig  --add openvpn 
		[root@bogon init.d]# chkconfig  --list openvpn

		Note: This output shows SysV services only and does not include native
			systemd services. SysV configuration data might be overridden by native
			systemd configuration.
		
			If you want to list systemd services use 'systemctl list-unit-files'.
			To see services enabled on particular target use
			'systemctl list-dependencies [target]'.
		
		openvpn        	0:off	1:off	2:off	3:on	4:on	5:on	6:off  #é»˜è®¤å¯åŠ¨3 , 4 , 5 
		
		[root@bogon init.d]# /etc/init.d/openvpn start
		Starting openvpn (via systemctl):                          [  OK  ]
		
		
		[root@bogon ~]# /etc/init.d/openvpn start 			#å¯åŠ¨ä¸äº†æ—¶æŸ¥çœ‹æ—¥å¿—
		Starting openvpn:[FAILED]
		[root@bogon ~]# killall openvpn 
		[root@bogon ~]# /etc/init.d/openvpn restart
		Shutting down openvpn:[ OK ]
		Starting openvpn:[ OK ]
		[root@bogon ~]# chkconfig openvpn on
		æç¤ºï¼šopenvpn server çš„è„šæœ¬å†…å®¹è§åæ–‡ï¼Œå¦‚æœopenvpnç›®å½•ä¸‹*.conf è¿‡å¤šä¼šå¯¼è‡´å¯åŠ¨é—®é¢˜ã€‚
		
â—¼ 1.5 å®‰è£… Windows vpn å®¢æˆ·ç«¯é…ç½® VPN	è¿æ¥
		
â—¾ 1.5.1 ä¸‹è½½å¹¶å®‰è£… openvpnå®¢æˆ·ç«¯
		ä» http://openvpn.se/download.html ä¸Šä¸‹è½½ä¸openvpnæœåŠ¡å™¨ç‰ˆæœ¬ä¸€è‡´çš„Windows å®¢æˆ·ç¦å®‰ "OpenVPN GUI For Windows"
			â”œâ”€â”€ é€‚åˆ win XP 
			â”‚		openvpn-2.2.2-gui-1.0.3-install.exe
			â”‚
			â””â”€â”€ é€‚åˆ win 7 32 / 64 
					openvpn-2.2.2-install.exe(å¯ä»¥è¿æ¥æœåŠ¡ç«¯çš„ openvpn-2.2.2.tar.gz)
			æç¤ºï¼šé«˜ç‰ˆæœ¬çš„å®¢æˆ·ç«¯http://openvpn.se/development.html 
			æç¤ºï¼šæœ‰ä¸å°‘ç½‘å‹å’ŒåŒå­¦åœ¨WIN7 ä¸‹è”ç³» openvpn éƒ½ä¸æˆåŠŸï¼Œæœ‰çš„è¿æ¥ä¸Šä¹‹åï¼Œä¸èƒ½æ”¹è·¯ç”±ï¼Œç½‘ä¸Šçš„ç­”æ¡ˆæ˜¯æƒé™ï¼Œå…¼
		å®¹æ¨¡å¼ï¼Œå…¶å®è¿™äº›éƒ½æ˜¯å¤šä½™çš„ï¼Œåœ¨å®˜ç½‘ä¸‹æœ€æ–°çš„å®¢æˆ·ç«¯ï¼Œ2.2.2è£…å®Œä¹‹åé…ç½®å¥½äº†å°±å¯ä»¥ç”¨äº†ã€‚
		http://swupdate.openvpn.org/community/releases/openvpn-2.2.2-install.exe 
		a)ä¾‹å¦‚ï¼ŒæœåŠ¡å™¨è£…çš„æ˜¯OpenVPN 2.09ï¼Œé‚£ä¹ˆä¸‹è½½çš„ OpenVPN GUI fow windows åº”è¯¥æ˜¯ï¼šopenvpn-2.2.2-gui-1.0.3-install.exe
		ï¼Œä¸€åˆ‡é‡‡ç”¨é»˜è®¤è®¾ç½®ã€‚
		
		
		
â—¾ 1.5.2 é…ç½®å¹¶ä¸‹è½½å®¢æˆ·ç«¯è¯ä¹¦
			å°† ca.crt test.crt test.key client.conf  å¤åˆ¶åˆ° F:\software\openvpn\config\test ï¼Œå°±æ˜¯å®‰è£…æ–‡ä»¶çš„configç›®å½•ä¸‹
		ï¼ˆä¸åŒç”¨æˆ·ä½¿ç”¨ä¸åŒè¯ä¹¦ï¼Œæ¯ä¸ªè¯ä¹¦åŒ…æ‹¬.crt å’Œ .key ä¸¤ä¸ªæ–‡ä»¶ï¼Œå¦‚ test.crt å’Œ test.key ï¼‰
			åœ¨ /etc/openvpn/client.conf çš„åŸºç¡€ä¸Šå»ºç«‹å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ï¼Œæ”¹åä¸ºC:\ProgramFiles\OpenVPN\config\client.conf
		ï¼Œå³å…ˆåœ¨æœåŠ¡å™¨ä¸Šå»ºç«‹é…ç½®æ–‡ä»¶ï¼Œç„¶ååœ¨ä¸‹è½½æ”¹ååˆ°å®¢æˆ·æœºä¸Šã€‚
			
			ä¸‹è½½å¥½è¯ä¹¦åæ”¾åˆ°å®‰è£…ç›®å½•ä¸‹
		
			sz -y ca.crt test.crt test.key client.conf #è¿™æ˜¯åœ¨æœåŠ¡å™¨ç«¯ä¸‹è½½æ–‡ä»¶çš„å‘½ä»¤
			
			#ä»¥ä¸‹æ˜¯åœ¨windowsä¸‹ ç”¨ CMD å‘½ä»¤æŸ¥çœ‹openvpnçš„å®‰è£…ç›®å½•
			F:\software\openvpn>tree
			å· æœ¬åœ°ç£ç›˜ çš„æ–‡ä»¶å¤¹ PATH åˆ—è¡¨
			å·åºåˆ—å·ä¸º 27AD-0B04
			F:.
			â”œâ”€bin
			â”œâ”€config	#æŠŠä¸‹è½½çš„é…ç½®æ–‡ä»¶æ”¾åˆ°configç›®å½•ä¸‹è¿˜å¯ä»¥åœ¨æ­¤ç›®å½•ä¸‹åœ¨é”®ä¸€ä¸ªæ–‡ä»¶å¤¹ç„¶åæ”¾åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹
			â”‚  â””â”€test	#ä¸‹è½½ä¸‹æ¥çš„é…ç½®æ–‡ä»¶éƒ½åœ¨testæ–‡ä»¶å¤¹ä¸‹
			â”œâ”€driver
			â”œâ”€easy-rsa
			â”œâ”€log
			â””â”€sample-config
		
		
â—¾ 1.5.3 Client.conf é»˜è®¤æƒ…å†µå¼€å¯çš„é…ç½®ï¼š
			å¤‡ä»½åŸå§‹æ–‡ä»¶ï¼Œç„¶åè¿‡æ»¤æ‰æ³¨é‡Šã€‚
			[root@bogon ~]# cp /root/tools/openvpn/openvpn-2.2.2/sample-config-files/client.conf /etc/openvpn
			[root@bogon keys]# egrep -v "^#|^;|^$" client.conf
			client
			dev tun
			proto udp
			remote my-server-1 1194
			resolv-retry infinite
			nobind
			persist-key
			persist-tun
			ca ca.crt
			cert client.crt	<---æ ¹æ®æƒ…å†µæ”¹ å¦‚ roye.crt
			key client.key	<---æ ¹æ®æƒ…å†µæ”¹ å¦‚ roye.key
			ns-cert-type server
			comp-lzo
			verb 3
			æç¤ºï¼šopenvpn2.2.2 çš„ç‰ˆæœ¬å’Œ 2.0.9çš„ client.conf åŒºåˆ« .2.0.9 ä¸‹é¢å‚æ•°æ˜¯æ³¨é‡ŠçŠ¶æ€;ns-cert-type server è€Œ 2.2.2 
		çš„å‚æ•°æ˜¯æ‰“å¼€çŠ¶æ€ ns-cert-type serverã€‚
		
		
			ä¼ä¸šç”Ÿäº§ç¯å¢ƒ client.conf çš„é…ç½®å¦‚ä¸‹ï¼š
			client
			dev tun
			proto udp
			remote my-server-1 1194
			resolv-retry infinite
			nobind
			persist-key
			persist-tun
			ca ca.crt
			cert client.crt	
			key client.key
			ns-cert-type server
			comp-lzo
			verb 3		
		
			å’Œé»˜è®¤æ ·ä¾‹é…ç½®ç›¸æ¯”ï¼Œæ”¹åŠ¨å¦‚ä¸‹ï¼š
			
			remote 10.0.0.28 52115 #è¿æ¥åˆ°çš„vpnæœåŠ¡ç«¯ipåœ°å€å’Œç«¯å£
			proto tcp			   #åè®®
			cert test.crt		   #å®¢æˆ·ç«¯è¯ä¹¦
			key  test.key		   #å®¢æˆ·ç«¯å¯†é’¥
		
		
â—¾ 1.5.3 åœ¨win10ä¸Š æ‹¨å·è¿œç¨‹è¿æ¥ openvpn æœåŠ¡	
		åœ¨windowså³ä¸‹è§’çš„openvpnå›¾æ ‡ ç‚¹å‡»ï¼Œé€‰æ‹©"Connect",å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šæ­£å¸¸æƒ…å†µä¸‹åº”è¯¥èƒ½å¤Ÿè¿æ¥æˆï¼Œå¹¶åˆ†é…æ­£å¸¸çš„IPåœ°å€ã€‚
		
		
		
		
		
		
		
		server  ip1 10.0.0.28 
				ip2 172.16.1.28
				ä¸€ä¸ªç½‘å…³ï¼š10.0.0.254
				
			æœåŠ¡ç«¯çš„é…ç½®æ–‡ä»¶
			local 10.0.2.15
			port 52115
			proto tcp
			dev tun
			ca /etc/openvpn/keys/ca.crt
			cert /etc/openvpn/keys/server.crt
			key /etc/openvpn/keys/server.key
			dh /etc/openvpn/keys/dh1024.pem
			server 10.8.0.0 255.255.255.0
			push "route 192.168.1.0 255.255.255.0"
			ifconfig-pool-persist ipp.txt
			keepalive 10 120
			comp-lzo
			persist-key
			persist-tun
			status openvpn-status.log
			verb 3
			client-to-client
			duplicate-cn
			log /var/log/openvpn.lo	
				

				
				
				
				
				
		client 	172.16.1.17
				æ— ç½‘å…³
				
				
				
				
				172.20.10.7
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
				
		
		
		
		
		
		
		
		
		
		
		
		

